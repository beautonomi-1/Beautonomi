[{"filePath":"C:\\Users\\NoloSehlolo\\Documents\\Beautonomi\\apps\\web\\src\\app\\provider\\get-started\\page.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":196,"column":20,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[6630,6722],"text":"\n                You&apos;re all set to start accepting bookings and making money!\n              "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[6630,6722],"text":"\n                You&lsquo;re all set to start accepting bookings and making money!\n              "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[6630,6722],"text":"\n                You&#39;re all set to start accepting bookings and making money!\n              "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[6630,6722],"text":"\n                You&rsquo;re all set to start accepting bookings and making money!\n              "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"unused-imports/no-unused-vars","severity":1,"message":"'totalSteps' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":235,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":235,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport React, { useState, useEffect } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Check, ChevronRight, ArrowRight, Sparkles, RefreshCw } from \"lucide-react\";\nimport { fetcher, FetchError, FetchTimeoutError } from \"@/lib/http/fetcher\";\nimport { toast } from \"sonner\";\nimport { useRouter } from \"next/navigation\";\nimport { SettingsDetailLayout } from \"@/components/provider/SettingsDetailLayout\";\nimport { Progress } from \"@/components/ui/progress\";\nimport LoadingTimeout from \"@/components/ui/loading-timeout\";\n\ninterface SetupStep {\n  id: string;\n  title: string;\n  description: string;\n  completed: boolean;\n  required: boolean;\n  link: string;\n}\n\ninterface SetupStatus {\n  isComplete: boolean;\n  completionPercentage: number;\n  steps: SetupStep[];\n}\n\nexport default function GetStartedPage() {\n  const router = useRouter();\n  const [setupStatus, setSetupStatus] = useState<SetupStatus | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isRefreshing, setIsRefreshing] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const lastFetchRef = React.useRef<number>(0);\n  const MIN_REFRESH_INTERVAL_MS = 2000;\n\n  useEffect(() => {\n    loadSetupStatus();\n  }, []);\n\n  // Refresh when user returns to this page (visibility/focus) - always refetch to show latest progress\n  useEffect(() => {\n    const handleRefresh = () => {\n      if (document.visibilityState !== \"visible\") return;\n      const now = Date.now();\n      if (now - lastFetchRef.current < MIN_REFRESH_INTERVAL_MS) return;\n      lastFetchRef.current = now;\n      sessionStorage.removeItem(\"shouldRefreshSetupStatus\");\n      loadSetupStatus(true);\n    };\n\n    const handleVisibilityChange = () => {\n      if (document.visibilityState === \"visible\" && !isLoading) handleRefresh();\n    };\n\n    const handleFocus = () => {\n      if (!isLoading) handleRefresh();\n    };\n\n    document.addEventListener(\"visibilitychange\", handleVisibilityChange);\n    window.addEventListener(\"focus\", handleFocus);\n    return () => {\n      document.removeEventListener(\"visibilitychange\", handleVisibilityChange);\n      window.removeEventListener(\"focus\", handleFocus);\n    };\n  }, [isLoading]);\n\n  const loadSetupStatus = async (isRefresh = false) => {\n    try {\n      if (isRefresh) {\n        setIsRefreshing(true);\n      } else {\n        setIsLoading(true);\n      }\n      setError(null);\n      const response = await fetcher.get<{ data: SetupStatus }>(\n        `/api/provider/setup-status?_=${Date.now()}`\n      );\n      setSetupStatus(response.data ?? { isComplete: false, completionPercentage: 0, steps: [] });\n      lastFetchRef.current = Date.now();\n      if (isRefresh) {\n        toast.success(\"Status updated\");\n      }\n    } catch (err) {\n      const errorMessage =\n        err instanceof FetchTimeoutError\n          ? \"Request timed out. Please try again.\"\n          : err instanceof FetchError\n          ? err.message\n          : \"Failed to load setup status\";\n      setError(errorMessage);\n      console.error(\"Error loading setup status:\", err);\n      if (isRefresh) {\n        toast.error(\"Failed to refresh status\");\n      }\n    } finally {\n      setIsLoading(false);\n      setIsRefreshing(false);\n    }\n  };\n\n  const handleStepClick = (step: SetupStep) => {\n    // Navigate to the step's link with return parameter\n    const returnUrl = encodeURIComponent(\"/provider/get-started\");\n    const separator = step.link.includes(\"?\") ? \"&\" : \"?\";\n    // Store return URL in sessionStorage for easy access\n    if (typeof window !== 'undefined') {\n      sessionStorage.setItem('getStartedReturnUrl', '/provider/get-started');\n      // Also store a flag to trigger refresh when returning\n      sessionStorage.setItem('shouldRefreshSetupStatus', 'true');\n    }\n    router.push(`${step.link}${separator}returnTo=${returnUrl}`);\n  };\n\n  const handleCompleteLater = () => {\n    router.push(\"/provider/dashboard\");\n  };\n\n  if (isLoading) {\n    return (\n      <SettingsDetailLayout\n        title=\"Get Started\"\n        breadcrumbs={[\n          { label: \"Home\", href: \"/\" },\n          { label: \"Provider\", href: \"/provider\" },\n          { label: \"Get Started\" },\n        ]}\n      >\n        <LoadingTimeout loadingMessage=\"Loading setup status...\" />\n      </SettingsDetailLayout>\n    );\n  }\n\n  if (error || !setupStatus) {\n    return (\n      <SettingsDetailLayout\n        title=\"Get Started\"\n        breadcrumbs={[\n          { label: \"Home\", href: \"/\" },\n          { label: \"Provider\", href: \"/provider\" },\n          { label: \"Get Started\" },\n        ]}\n      >\n        <div className=\"bg-white rounded-lg border p-6\">\n          <p className=\"text-red-600\">{error || \"Failed to load setup status\"}</p>\n          <Button onClick={() => loadSetupStatus()} className=\"mt-4\">\n            Retry\n          </Button>\n        </div>\n      </SettingsDetailLayout>\n    );\n  }\n\n  // No steps = no provider record yet (complete onboarding first)\n  if (!setupStatus.steps || setupStatus.steps.length === 0) {\n    return (\n      <SettingsDetailLayout\n        title=\"Get Started\"\n        breadcrumbs={[\n          { label: \"Home\", href: \"/\" },\n          { label: \"Provider\", href: \"/provider\" },\n          { label: \"Get Started\" },\n        ]}\n      >\n        <div className=\"bg-white rounded-lg border p-6\">\n          <p className=\"text-gray-700 mb-4\">\n            Complete onboarding first to set up your provider account and see your setup steps.\n          </p>\n          <Button onClick={() => router.push(\"/provider/onboarding\")} className=\"bg-[#FF0077] hover:bg-[#D60565] text-white\">\n            Go to Onboarding\n          </Button>\n        </div>\n      </SettingsDetailLayout>\n    );\n  }\n\n  // If setup is complete, show success message and redirect option\n  if (setupStatus.isComplete) {\n    return (\n      <SettingsDetailLayout\n        title=\"Get Started\"\n        breadcrumbs={[\n          { label: \"Home\", href: \"/\" },\n          { label: \"Provider\", href: \"/provider\" },\n          { label: \"Get Started\" },\n        ]}\n      >\n        <div className=\"max-w-4xl mx-auto\">\n          <div className=\"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-8 mb-6 text-center border-2 border-green-200\">\n            <div className=\"flex flex-col items-center\">\n              <div className=\"w-20 h-20 bg-green-500 rounded-full flex items-center justify-center mb-4 animate-pulse\">\n                <Check className=\"w-12 h-12 text-white\" />\n              </div>\n              <h1 className=\"text-3xl font-bold text-green-800 mb-2\">≡ƒÄë Setup Complete!</h1>\n              <p className=\"text-lg text-green-700 mb-6\">\n                You're all set to start accepting bookings and making money!\n              </p>\n              <div className=\"flex gap-4\">\n                <Button\n                  onClick={() => router.push(\"/provider/dashboard\")}\n                  className=\"bg-[#FF0077] hover:bg-[#D60565] text-white\"\n                >\n                  Go to Dashboard\n                  <ArrowRight className=\"w-4 h-4 ml-2\" />\n                </Button>\n                <Button\n                  variant=\"outline\"\n                  onClick={() => router.push(\"/provider/catalogue/services\")}\n                  className=\"border-green-300 text-green-700 hover:bg-green-50\"\n                >\n                  Manage Services\n                </Button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </SettingsDetailLayout>\n    );\n  }\n\n  // Sort steps: required first, then by completion status (incomplete first)\n  const sortedSteps = [...setupStatus.steps].sort((a, b) => {\n    // Required steps come first\n    if (a.required && !b.required) return -1;\n    if (!a.required && b.required) return 1;\n    // Within same required status, incomplete come first\n    if (!a.completed && b.completed) return -1;\n    if (a.completed && !b.completed) return 1;\n    return 0;\n  });\n\n  const requiredSteps = sortedSteps.filter((step) => step.required);\n  const completedRequiredSteps = requiredSteps.filter((step) => step.completed).length;\n  const allRequiredComplete = completedRequiredSteps === requiredSteps.length;\n  const totalSteps = sortedSteps.length;\n\n  return (\n    <SettingsDetailLayout\n      title=\"Get Started\"\n      breadcrumbs={[\n        { label: \"Home\", href: \"/\" },\n        { label: \"Provider\", href: \"/provider\" },\n        { label: \"Get Started\" },\n      ]}\n    >\n      <div className=\"max-w-4xl mx-auto\">\n        {/* Header */}\n        <div className=\"bg-gradient-to-r from-[#FF0077] to-[#D60565] rounded-xl p-8 mb-6 text-white\">\n          <div className=\"flex items-start justify-between\">\n            <div className=\"flex-1\">\n              <div className=\"flex items-center justify-between mb-3\">\n                <div className=\"flex items-center gap-3\">\n                  <Sparkles className=\"w-8 h-8\" />\n                  <h1 className=\"text-3xl font-bold\">Get Started</h1>\n                </div>\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={() => loadSetupStatus(true)}\n                  disabled={isRefreshing}\n                  className=\"text-white hover:text-white/90 hover:bg-white/10 disabled:opacity-50\"\n                  title=\"Refresh status\"\n                >\n                  <RefreshCw className={`w-4 h-4 ${isRefreshing ? 'animate-spin' : ''}`} />\n                </Button>\n              </div>\n              <p className=\"text-lg text-white/90 mb-4\">\n                {completedRequiredSteps === requiredSteps.length\n                  ? \"≡ƒÄë All required steps completed! You're ready to start accepting bookings.\"\n                  : completedRequiredSteps > 0\n                  ? `You have ${requiredSteps.length - completedRequiredSteps} required step${requiredSteps.length - completedRequiredSteps === 1 ? '' : 's'} remaining. Complete them to start making money!`\n                  : `Complete these steps to start accepting bookings and making money!`}\n              </p>\n              <div className=\"flex items-center gap-4\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <span className=\"text-sm font-medium\">\n                      {setupStatus.completionPercentage}% Complete\n                    </span>\n                    <span className=\"text-sm\">\n                      {completedRequiredSteps} of {requiredSteps.length} required steps\n                    </span>\n                  </div>\n                  <Progress\n                    value={setupStatus.completionPercentage}\n                    className=\"h-3 bg-white/20\"\n                  />\n                </div>\n              </div>\n            </div>\n            {allRequiredComplete && (\n              <div className=\"ml-6 bg-white/20 rounded-lg p-4 animate-pulse\">\n                <Check className=\"w-12 h-12\" />\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Steps List */}\n        <div className=\"space-y-4 mb-6\">\n          {sortedSteps.map((step, index) => {\n            // Determine step number (only count required steps for numbering, but show all)\n            const stepNumber = index + 1;\n            return (\n            <div\n              key={step.id}\n              className={`bg-white rounded-lg border-2 p-6 transition-all cursor-pointer hover:shadow-lg hover:scale-[1.01] ${\n                step.completed\n                  ? \"border-green-200 bg-green-50/30 hover:border-green-300\"\n                  : step.required\n                  ? \"border-[#FF0077]/30 hover:border-[#FF0077]/50\"\n                  : \"border-gray-200 hover:border-gray-300\"\n              }`}\n              onClick={() => handleStepClick(step)}\n            >\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex items-start gap-4 flex-1\">\n                  <div\n                    className={`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg ${\n                      step.completed\n                        ? \"bg-green-500 text-white\"\n                        : \"bg-gray-200 text-gray-600\"\n                    }`}\n                  >\n                    {step.completed ? (\n                      <Check className=\"w-6 h-6\" />\n                    ) : (\n                      <span>{stepNumber}</span>\n                    )}\n                  </div>\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center gap-2 mb-1\">\n                      <h3 className=\"text-lg font-semibold text-gray-900\">\n                        {step.title}\n                      </h3>\n                      {step.required && (\n                        <span className=\"text-xs bg-[#FF0077] text-white px-2 py-0.5 rounded-full\">\n                          Required\n                        </span>\n                      )}\n                    </div>\n                    <p className=\"text-gray-600 mb-3\">{step.description}</p>\n                    <Button\n                      onClick={() => handleStepClick(step)}\n                      variant={step.completed ? \"outline\" : \"default\"}\n                      className={`transition-all ${\n                        step.completed\n                          ? \"border-green-500 text-green-700 hover:bg-green-50 hover:border-green-600\"\n                          : \"bg-[#FF0077] hover:bg-[#D60565] text-white shadow-sm hover:shadow-md\"\n                      }`}\n                    >\n                      {step.completed ? \"Update\" : \"Set Up\"}\n                      <ChevronRight className=\"w-4 h-4 ml-2\" />\n                    </Button>\n                  </div>\n                </div>\n              </div>\n            </div>\n            );\n          })}\n        </div>\n\n        {/* Footer Actions */}\n        <div className={`flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 rounded-lg border p-6 transition-all ${\n          allRequiredComplete \n            ? \"bg-gradient-to-r from-green-50 to-emerald-50 border-green-200\" \n            : \"bg-white border-gray-200\"\n        }`}>\n          <div className=\"flex-1\">\n            <p className={`text-sm ${allRequiredComplete ? \"text-green-800 font-medium\" : \"text-gray-600\"}`}>\n              {allRequiredComplete\n                ? \"≡ƒÄë Great! You're all set to start accepting bookings and making money!\"\n                : completedRequiredSteps > 0\n                ? `You have ${requiredSteps.length - completedRequiredSteps} required step${requiredSteps.length - completedRequiredSteps === 1 ? '' : 's'} remaining. Complete them to start accepting bookings and making money!`\n                : `Complete the required steps above to start accepting bookings.`}\n            </p>\n          </div>\n          <div className=\"flex gap-3 w-full sm:w-auto\">\n            <Button\n              variant=\"outline\"\n              onClick={handleCompleteLater}\n              className=\"border-gray-300 flex-1 sm:flex-none\"\n            >\n              Complete Later\n            </Button>\n            {allRequiredComplete && (\n              <Button\n                onClick={() => router.push(\"/provider/dashboard\")}\n                className=\"bg-[#FF0077] hover:bg-[#D60565] text-white flex-1 sm:flex-none\"\n              >\n                Go to Dashboard\n                <ArrowRight className=\"w-4 h-4 ml-2\" />\n              </Button>\n            )}\n          </div>\n        </div>\n\n        {/* Tips Section */}\n        {!allRequiredComplete && (\n          <div className=\"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-6\">\n            <h3 className=\"font-semibold text-blue-900 mb-2\">≡ƒÆí Quick Tips</h3>\n            <ul className=\"space-y-2 text-sm text-blue-800\">\n              <li>ΓÇó Complete required steps first to start accepting bookings</li>\n              <li>ΓÇó You can always come back to update optional settings later</li>\n              <li>ΓÇó Adding photos helps customers discover your services</li>\n              <li>ΓÇó Set up payment processing to receive payments automatically</li>\n            </ul>\n          </div>\n        )}\n      </div>\n    </SettingsDetailLayout>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\NoloSehlolo\\Documents\\Beautonomi\\apps\\web\\src\\app\\provider\\onboarding\\page.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'saveDraft'. Either include it or remove the dependency array.","line":215,"column":6,"nodeType":"ArrayExpression","endLine":215,"endColumn":29,"suggestions":[{"desc":"Update the dependencies array to be: [formData, currentStep, saveDraft]","fix":{"range":[7003,7026],"text":"[formData, currentStep, saveDraft]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":219,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":219,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7123,7126],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7123,7126],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"unused-imports/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":225,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":225,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":487,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":487,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16699,16702],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16699,16702],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":487,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":487,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16739,16742],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16739,16742],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":524,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":524,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18173,18176],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18173,18176],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"unused-imports/no-unused-vars","severity":1,"message":"'stepIndex' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":611,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":611,"endColumn":34},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":818,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":818,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[29973,29976],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[29973,29976],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"unused-imports/no-unused-vars","severity":1,"message":"'Step1BusinessInfo' is defined but never used. Allowed unused vars must match /^_/u.","line":869,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":869,"endColumn":27},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":899,"column":43,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[33207,33272],"text":" We&apos;ll automatically configure most settings for you! \n          "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[33207,33272],"text":" We&lsquo;ll automatically configure most settings for you! \n          "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[33207,33272],"text":" We&#39;ll automatically configure most settings for you! \n          "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[33207,33272],"text":" We&rsquo;ll automatically configure most settings for you! \n          "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":927,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":927,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[34622,34625],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[34622,34625],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":944,"column":52,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[35544,35702],"text":" You&apos;ll be automatically set up as mobile-ready staff. \n              We'll help you select service zones where you can provide at-home services.\n            "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[35544,35702],"text":" You&lsquo;ll be automatically set up as mobile-ready staff. \n              We'll help you select service zones where you can provide at-home services.\n            "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[35544,35702],"text":" You&#39;ll be automatically set up as mobile-ready staff. \n              We'll help you select service zones where you can provide at-home services.\n            "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[35544,35702],"text":" You&rsquo;ll be automatically set up as mobile-ready staff. \n              We'll help you select service zones where you can provide at-home services.\n            "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":945,"column":17,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[35544,35702],"text":" You'll be automatically set up as mobile-ready staff. \n              We&apos;ll help you select service zones where you can provide at-home services.\n            "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[35544,35702],"text":" You'll be automatically set up as mobile-ready staff. \n              We&lsquo;ll help you select service zones where you can provide at-home services.\n            "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[35544,35702],"text":" You'll be automatically set up as mobile-ready staff. \n              We&#39;ll help you select service zones where you can provide at-home services.\n            "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[35544,35702],"text":" You'll be automatically set up as mobile-ready staff. \n              We&rsquo;ll help you select service zones where you can provide at-home services.\n            "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":954,"column":17,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[35981,36111],"text":" You operate both a fixed location and provide mobile/at-home services. \n              We&apos;ll help you configure both.\n            "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[35981,36111],"text":" You operate both a fixed location and provide mobile/at-home services. \n              We&lsquo;ll help you configure both.\n            "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[35981,36111],"text":" You operate both a fixed location and provide mobile/at-home services. \n              We&#39;ll help you configure both.\n            "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[35981,36111],"text":" You operate both a fixed location and provide mobile/at-home services. \n              We&rsquo;ll help you configure both.\n            "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"unused-imports/no-unused-vars","severity":1,"message":"'response' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":1227,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":1227,"endColumn":21},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":1354,"column":15,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[53467,53600],"text":"\n            We&apos;ll send a 4-digit verification code via SMS to verify your number. This helps us keep your account secure.\n          "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[53467,53600],"text":"\n            We&lsquo;ll send a 4-digit verification code via SMS to verify your number. This helps us keep your account secure.\n          "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[53467,53600],"text":"\n            We&#39;ll send a 4-digit verification code via SMS to verify your number. This helps us keep your account secure.\n          "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[53467,53600],"text":"\n            We&rsquo;ll send a 4-digit verification code via SMS to verify your number. This helps us keep your account secure.\n          "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":1950,"column":70,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[78251,78370],"text":"\n          Yoco is a popular card payment solution in South Africa. We&apos;ll help you set it up after onboarding.\n        "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[78251,78370],"text":"\n          Yoco is a popular card payment solution in South Africa. We&lsquo;ll help you set it up after onboarding.\n        "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[78251,78370],"text":"\n          Yoco is a popular card payment solution in South Africa. We&#39;ll help you set it up after onboarding.\n        "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[78251,78370],"text":"\n          Yoco is a popular card payment solution in South Africa. We&rsquo;ll help you set it up after onboarding.\n        "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1961,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1961,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[78686,78689],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[78686,78689],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":2013,"column":63,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[80688,80914],"text":"\n            Are you VAT registered with SARS? VAT registration is mandatory if your annual turnover is R1 million or more.\n            If you make less than R1 million per year, you don&apos;t need to be VAT registered.\n          "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[80688,80914],"text":"\n            Are you VAT registered with SARS? VAT registration is mandatory if your annual turnover is R1 million or more.\n            If you make less than R1 million per year, you don&lsquo;t need to be VAT registered.\n          "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[80688,80914],"text":"\n            Are you VAT registered with SARS? VAT registration is mandatory if your annual turnover is R1 million or more.\n            If you make less than R1 million per year, you don&#39;t need to be VAT registered.\n          "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[80688,80914],"text":"\n            Are you VAT registered with SARS? VAT registration is mandatory if your annual turnover is R1 million or more.\n            If you make less than R1 million per year, you don&rsquo;t need to be VAT registered.\n          "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":2063,"column":71,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[82867,82893],"text":"No, I&apos;m not VAT registered"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[82867,82893],"text":"No, I&lsquo;m not VAT registered"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[82867,82893],"text":"No, I&#39;m not VAT registered"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[82867,82893],"text":"No, I&rsquo;m not VAT registered"},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":2122,"column":82,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[85420,85583],"text":" To receive payments from bookings, you&apos;ll need to add your bank account details. \n            You can complete this now or set it up later in Settings.\n          "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[85420,85583],"text":" To receive payments from bookings, you&lsquo;ll need to add your bank account details. \n            You can complete this now or set it up later in Settings.\n          "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[85420,85583],"text":" To receive payments from bookings, you&#39;ll need to add your bank account details. \n            You can complete this now or set it up later in Settings.\n          "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[85420,85583],"text":" To receive payments from bookings, you&rsquo;ll need to add your bank account details. \n            You can complete this now or set it up later in Settings.\n          "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":2296,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":2296,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[91720,91723],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[91720,91723],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":2435,"column":104,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[96738,96930],"text":"\n                  Enter your base location or service area center. This helps customers find you and we&apos;ll use it to calculate travel fees and distances for at-home services.\n                "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[96738,96930],"text":"\n                  Enter your base location or service area center. This helps customers find you and we&lsquo;ll use it to calculate travel fees and distances for at-home services.\n                "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[96738,96930],"text":"\n                  Enter your base location or service area center. This helps customers find you and we&#39;ll use it to calculate travel fees and distances for at-home services.\n                "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[96738,96930],"text":"\n                  Enter your base location or service area center. This helps customers find you and we&rsquo;ll use it to calculate travel fees and distances for at-home services.\n                "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":2439,"column":123,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[96972,97174],"text":"\n                  Enter your salon address. This helps customers find you on the map and enables location-based search. We&apos;ll also use it to calculate travel fees for at-home services.\n                "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[96972,97174],"text":"\n                  Enter your salon address. This helps customers find you on the map and enables location-based search. We&lsquo;ll also use it to calculate travel fees for at-home services.\n                "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[96972,97174],"text":"\n                  Enter your salon address. This helps customers find you on the map and enables location-based search. We&#39;ll also use it to calculate travel fees for at-home services.\n                "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[96972,97174],"text":"\n                  Enter your salon address. This helps customers find you on the map and enables location-based search. We&rsquo;ll also use it to calculate travel fees for at-home services.\n                "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":2482,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":2482,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[98827,98830],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[98827,98830],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":2501,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":2501,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[99512,99515],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[99512,99515],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":2525,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":2525,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[100502,100505],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[100502,100505],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":2542,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":2542,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[101213,101216],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[101213,101216],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":2567,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":2567,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[102167,102170],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[102167,102170],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":2591,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":2591,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[102812,102815],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[102812,102815],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":2605,"column":72,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":2605,"endColumn":75,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[103314,103317],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[103314,103317],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":2618,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":2618,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[103886,103889],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[103886,103889],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'data.address?.city', 'data.address?.country', 'data.address?.line1', 'data.address?.postal_code', and 'updateData'. Either include them or remove the dependency array. If 'updateData' changes too often, find the parent component that defines it and wrap that definition in useCallback.","line":2633,"column":6,"nodeType":"ArrayExpression","endLine":2633,"endColumn":55,"suggestions":[{"desc":"Update the dependencies array to be: [data.address?.city, data.address?.country, data.address?.latitude, data.address?.line1, data.address?.longitude, data.address?.postal_code, updateData]","fix":{"range":[104435,104484],"text":"[data.address?.city, data.address?.country, data.address?.latitude, data.address?.line1, data.address?.longitude, data.address?.postal_code, updateData]"}}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":2682,"column":91,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[106082,106254],"text":" define where you can provide at-home services. We&apos;ve automatically found zones matching your location. You can select or skip this step and configure zones later.\n        "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[106082,106254],"text":" define where you can provide at-home services. We&lsquo;ve automatically found zones matching your location. You can select or skip this step and configure zones later.\n        "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[106082,106254],"text":" define where you can provide at-home services. We&#39;ve automatically found zones matching your location. You can select or skip this step and configure zones later.\n        "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[106082,106254],"text":" define where you can provide at-home services. We&rsquo;ve automatically found zones matching your location. You can select or skip this step and configure zones later.\n        "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":2749,"column":20,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[109285,109416],"text":" selected. \n                You&apos;ll be able to set travel fees and pricing for each zone after completing onboarding.\n              "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[109285,109416],"text":" selected. \n                You&lsquo;ll be able to set travel fees and pricing for each zone after completing onboarding.\n              "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[109285,109416],"text":" selected. \n                You&#39;ll be able to set travel fees and pricing for each zone after completing onboarding.\n              "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[109285,109416],"text":" selected. \n                You&rsquo;ll be able to set travel fees and pricing for each zone after completing onboarding.\n              "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'data.global_category_ids' and 'updateData'. Either include them or remove the dependency array. If 'updateData' changes too often, find the parent component that defines it and wrap that definition in useCallback.","line":2787,"column":6,"nodeType":"ArrayExpression","endLine":2787,"endColumn":44,"suggestions":[{"desc":"Update the dependencies array to be: [globalCategories, data.business_type, data.global_category_ids, updateData]","fix":{"range":[110713,110751],"text":"[globalCategories, data.business_type, data.global_category_ids, updateData]"}}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":2860,"column":51,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[112977,113085],"text":" If you skip adding services, we&apos;ll automatically generate basic services based on your selected categories!"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[112977,113085],"text":" If you skip adding services, we&lsquo;ll automatically generate basic services based on your selected categories!"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[112977,113085],"text":" If you skip adding services, we&#39;ll automatically generate basic services based on your selected categories!"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[112977,113085],"text":" If you skip adding services, we&rsquo;ll automatically generate basic services based on your selected categories!"},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'updateData'. Either include it or remove the dependency array. If 'updateData' changes too often, find the parent component that defines it and wrap that definition in useCallback.","line":2935,"column":6,"nodeType":"ArrayExpression","endLine":2935,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [services, updateData]","fix":{"range":[115632,115642],"text":"[services, updateData]"}}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":3302,"column":81,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[129005,129126],"text":"\n            Add optional extras customers can purchase with this service (e.g., &quot;Hair Treatment\", \"Nail Art\")\n          "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[129005,129126],"text":"\n            Add optional extras customers can purchase with this service (e.g., &ldquo;Hair Treatment\", \"Nail Art\")\n          "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[129005,129126],"text":"\n            Add optional extras customers can purchase with this service (e.g., &#34;Hair Treatment\", \"Nail Art\")\n          "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[129005,129126],"text":"\n            Add optional extras customers can purchase with this service (e.g., &rdquo;Hair Treatment\", \"Nail Art\")\n          "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":3302,"column":96,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[129005,129126],"text":"\n            Add optional extras customers can purchase with this service (e.g., \"Hair Treatment&quot;, \"Nail Art\")\n          "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[129005,129126],"text":"\n            Add optional extras customers can purchase with this service (e.g., \"Hair Treatment&ldquo;, \"Nail Art\")\n          "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[129005,129126],"text":"\n            Add optional extras customers can purchase with this service (e.g., \"Hair Treatment&#34;, \"Nail Art\")\n          "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[129005,129126],"text":"\n            Add optional extras customers can purchase with this service (e.g., \"Hair Treatment&rdquo;, \"Nail Art\")\n          "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":3302,"column":99,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[129005,129126],"text":"\n            Add optional extras customers can purchase with this service (e.g., \"Hair Treatment\", &quot;Nail Art\")\n          "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[129005,129126],"text":"\n            Add optional extras customers can purchase with this service (e.g., \"Hair Treatment\", &ldquo;Nail Art\")\n          "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[129005,129126],"text":"\n            Add optional extras customers can purchase with this service (e.g., \"Hair Treatment\", &#34;Nail Art\")\n          "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[129005,129126],"text":"\n            Add optional extras customers can purchase with this service (e.g., \"Hair Treatment\", &rdquo;Nail Art\")\n          "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":3302,"column":108,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[129005,129126],"text":"\n            Add optional extras customers can purchase with this service (e.g., \"Hair Treatment\", \"Nail Art&quot;)\n          "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[129005,129126],"text":"\n            Add optional extras customers can purchase with this service (e.g., \"Hair Treatment\", \"Nail Art&ldquo;)\n          "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[129005,129126],"text":"\n            Add optional extras customers can purchase with this service (e.g., \"Hair Treatment\", \"Nail Art&#34;)\n          "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[129005,129126],"text":"\n            Add optional extras customers can purchase with this service (e.g., \"Hair Treatment\", \"Nail Art&rdquo;)\n          "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'data.operating_hours' and 'updateData'. Either include them or remove the dependency array. If 'updateData' changes too often, find the parent component that defines it and wrap that definition in useCallback.","line":3523,"column":6,"nodeType":"ArrayExpression","endLine":3523,"endColumn":20,"suggestions":[{"desc":"Update the dependencies array to be: [data.operating_hours, isFreelancer, updateData]","fix":{"range":[136555,136569],"text":"[data.operating_hours, isFreelancer, updateData]"}}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":3532,"column":52,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[136963,137117],"text":" We&apos;ve set flexible hours (8 AM - 8 PM weekdays) perfect for mobile services. \n              Adjust as needed - you can change these anytime!\n            "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[136963,137117],"text":" We&lsquo;ve set flexible hours (8 AM - 8 PM weekdays) perfect for mobile services. \n              Adjust as needed - you can change these anytime!\n            "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[136963,137117],"text":" We&#39;ve set flexible hours (8 AM - 8 PM weekdays) perfect for mobile services. \n              Adjust as needed - you can change these anytime!\n            "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[136963,137117],"text":" We&rsquo;ve set flexible hours (8 AM - 8 PM weekdays) perfect for mobile services. \n              Adjust as needed - you can change these anytime!\n            "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":3677,"column":67,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[143562,143563],"text":"&quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[143562,143563],"text":"&ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[143562,143563],"text":"&#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[143562,143563],"text":"&rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":3677,"column":89,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[143584,143585],"text":"&quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[143584,143585],"text":"&ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[143584,143585],"text":"&#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[143584,143585],"text":"&rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":3700,"column":79,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[144652,144772],"text":" We&apos;ll create basic services based on your selected categories. You can add more services after onboarding.\n            "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[144652,144772],"text":" We&lsquo;ll create basic services based on your selected categories. You can add more services after onboarding.\n            "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[144652,144772],"text":" We&#39;ll create basic services based on your selected categories. You can add more services after onboarding.\n            "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[144652,144772],"text":" We&rsquo;ll create basic services based on your selected categories. You can add more services after onboarding.\n            "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":3710,"column":81,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":3710,"endColumn":84,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[145186,145189],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[145186,145189],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":3727,"column":61,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[145890,145950],"text":" After submission, we&apos;ll automatically configure:\n          "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[145890,145950],"text":" After submission, we&lsquo;ll automatically configure:\n          "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[145890,145950],"text":" After submission, we&#39;ll automatically configure:\n          "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[145890,145950],"text":" After submission, we&rsquo;ll automatically configure:\n          "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'data.selected_plan_id' and 'updateData'. Either include them or remove the dependency array. If 'updateData' changes too often, find the parent component that defines it and wrap that definition in useCallback.","line":3786,"column":6,"nodeType":"ArrayExpression","endLine":3786,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [data.selected_plan_id, updateData]","fix":{"range":[147953,147955],"text":"[data.selected_plan_id, updateData]"}}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":3889,"column":66,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[151865,151964],"text":" After you submit, you&apos;ll be assigned to this plan and can start your 14-day free trial.\n          "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[151865,151964],"text":" After you submit, you&lsquo;ll be assigned to this plan and can start your 14-day free trial.\n          "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[151865,151964],"text":" After you submit, you&#39;ll be assigned to this plan and can start your 14-day free trial.\n          "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[151865,151964],"text":" After you submit, you&rsquo;ll be assigned to this plan and can start your 14-day free trial.\n          "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":51,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport Image from \"next/image\";\nimport RoleGuard from \"@/components/auth/RoleGuard\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { ChevronLeft, ChevronRight, Check, Plus, Trash2, AlertCircle, Sparkles, Upload, Image as ImageIcon, X, Loader2, MapPin } from \"lucide-react\";\nimport { useRouter } from \"next/navigation\";\nimport { toast } from \"sonner\";\nimport { fetcher, FetchError, FetchTimeoutError } from \"@/lib/http/fetcher\";\nimport AddressAutocomplete from \"@/components/mapbox/AddressAutocomplete\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport Breadcrumb from \"@/components/ui/breadcrumb\";\nimport { validateFileType, validateFileSize, IMAGE_CONSTRAINTS } from \"@/lib/supabase/storage-client\";\nimport { getPricingPlans } from \"@/lib/supabase/pricing\";\n\ninterface GlobalCategory {\n  id: string;\n  name: string;\n  slug: string;\n  icon?: string;\n  description?: string;\n}\n\ninterface ServiceAddon {\n  id?: string;\n  name: string;\n  description?: string;\n  price: number;\n  currency: string;\n  duration_minutes?: number;\n}\n\ninterface Service {\n  id?: string;\n  title: string;\n  description?: string;\n  duration_minutes: number;\n  price: number;\n  currency: string;\n  supports_at_home: boolean;\n  supports_at_salon: boolean;\n  category_id?: string;\n  addons?: ServiceAddon[]; // Addons specific to this service\n}\n\ninterface OnboardingData {\n  // Step 1: Team Size\n  team_size: \"freelancer\" | \"small\" | \"medium\" | \"large\";\n  \n  // Step 2: Identity (Owner Info)\n  owner_name: string;\n  owner_email: string;\n  owner_phone: string;\n  phone_verified: boolean;\n  phone_verification_code?: string;\n  \n  // Step 3: Business Details\n  business_name: string;\n  business_type: \"salon\" | \"mobile\" | \"both\";\n  description: string;\n  website?: string;\n  years_in_business?: number;\n  languages_spoken?: string[];\n  social_media_links?: {\n    facebook?: string;\n    instagram?: string;\n    twitter?: string;\n    linkedin?: string;\n  };\n  \n  // Step 4: Payment Setup\n  yoco_machine: \"yes\" | \"no\" | \"other\";\n  yoco_machine_other?: string;\n  payout_setup_complete?: boolean; // Track if payout account is set up\n  is_vat_registered?: boolean; // VAT registration status\n  vat_number?: string; // SARS VAT number (if VAT registered)\n  \n  // Step 5: Current Software\n  previous_software?: string;\n  previous_software_other?: string;\n  \n  // Step 6: Payroll\n  payroll_type: \"commission\" | \"hourly\" | \"both\" | \"other\";\n  payroll_details?: string;\n  \n  // Step 7: Location\n  address: {\n    line1: string;\n    line2?: string;\n    city: string;\n    state: string;\n    postal_code: string;\n    country: string;\n    latitude?: number;\n    longitude?: number;\n  };\n  \n  // Step 8: Photos\n  thumbnail_url?: string;\n  gallery?: string[];\n\n  // Business contact (used in Step3; aliased from owner_* for display)\n  phone?: string;\n  email?: string;\n\n  // Public homepage / booking optimization\n  accepts_custom_requests?: boolean;\n  response_rate?: number;\n  response_time_hours?: number;\n  tax_rate_percent?: number | null;\n  tips_enabled?: boolean;\n  cancellation_window_hours?: number;\n  requires_deposit?: boolean;\n  deposit_percentage?: number | null;\n  no_show_fee_enabled?: boolean;\n  no_show_fee_amount?: number | null;\n  include_in_search_engines?: boolean;\n  \n  // Step 9: Service Zones\n  selected_zone_ids?: string[];\n  \n  // Step 10: Service Categories\n  global_category_ids: string[];\n  \n  // Step 11: Service Catalog\n  services: Service[];\n  \n  // Step 12: Operating Hours\n  operating_hours: {\n    [key: string]: { open: string; close: string; closed: boolean };\n  };\n  \n  // Step 14: Plan Selection\n  selected_plan_id?: string;\n}\n\n// New streamlined step order\nconst STEPS = [\n  { id: 1, title: \"Team Size\", description: \"Tell us about your team\" },\n  { id: 2, title: \"Your Identity\", description: \"Your name, email, and phone\" },\n  { id: 3, title: \"Business Details\", description: \"Tell us about your business\" },\n  { id: 4, title: \"Payment Setup\", description: \"Do you have a Yoco machine?\" },\n  { id: 5, title: \"Current Software\", description: \"Are you moving from another system?\" },\n  { id: 6, title: \"Payroll\", description: \"How do you pay your staff?\" },\n  { id: 7, title: \"Location\", description: \"Where are you located?\" },\n  { id: 8, title: \"Photos\", description: \"Add your photos\" },\n  { id: 9, title: \"Service Zones\", description: \"Select service areas\", canSkip: true, conditional: (data: Partial<OnboardingData>) => data.business_type === \"mobile\" || data.business_type === \"both\" },\n  { id: 10, title: \"Service Categories\", description: \"Select categories\" },\n  { id: 11, title: \"Service Catalog\", description: \"Add your services\", canSkip: true },\n  { id: 12, title: \"Operating Hours\", description: \"When are you open?\" },\n  { id: 13, title: \"Review\", description: \"Review and submit\" },\n  { id: 14, title: \"Choose Your Plan\", description: \"Select a subscription plan\" },\n];\n\nexport default function ProviderOnboarding() {\n  const router = useRouter();\n  const [currentStep, setCurrentStep] = useState(1);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [isSavingDraft, setIsSavingDraft] = useState(false);\n  const [formData, setFormData] = useState<Partial<OnboardingData>>({\n    team_size: undefined,\n    owner_name: \"\",\n    owner_email: \"\",\n    owner_phone: \"\",\n    phone_verified: false,\n    business_name: \"\",\n    business_type: \"salon\",\n    description: \"\",\n    yoco_machine: undefined,\n    previous_software: undefined,\n    payroll_type: undefined,\n    services: [],\n    global_category_ids: [],\n    operating_hours: {\n      monday: { open: \"09:00\", close: \"18:00\", closed: false },\n      tuesday: { open: \"09:00\", close: \"18:00\", closed: false },\n      wednesday: { open: \"09:00\", close: \"18:00\", closed: false },\n      thursday: { open: \"09:00\", close: \"18:00\", closed: false },\n      friday: { open: \"09:00\", close: \"18:00\", closed: false },\n      saturday: { open: \"09:00\", close: \"18:00\", closed: false },\n      sunday: { open: \"09:00\", close: \"18:00\", closed: true },\n    },\n    selected_zone_ids: [],\n  });\n\n  // Check for pre-selected plan from query params\n  useEffect(() => {\n    if (typeof window !== 'undefined') {\n      const params = new URLSearchParams(window.location.search);\n      const planId = params.get('planId');\n      if (planId) {\n        setFormData(prev => ({ ...prev, selected_plan_id: planId }));\n      }\n    }\n  }, []);\n\n  // Load draft on mount\n  useEffect(() => {\n    loadDraft();\n  }, []);\n\n  // Auto-save draft when form data changes\n  useEffect(() => {\n    const saveTimer = setTimeout(() => {\n      if (formData.business_name || formData.address) {\n        saveDraft();\n      }\n    }, 2000); // Debounce: save 2 seconds after last change\n\n    return () => clearTimeout(saveTimer);\n  }, [formData, currentStep]);\n\n  const loadDraft = async () => {\n    try {\n      const response = await fetcher.get<{ data: any }>(\"/api/provider/onboarding/draft\");\n      if (response.data && response.data.draft_data) {\n        setFormData(response.data.draft_data);\n        setCurrentStep(response.data.current_step || 1);\n        toast.success(\"Resumed from saved draft\");\n      }\n    } catch (error) {\n      // No draft exists, that's fine\n      console.log(\"No draft found, starting fresh\");\n    }\n  };\n\n  const saveDraft = async () => {\n    try {\n      setIsSavingDraft(true);\n      await fetcher.post(\"/api/provider/onboarding/draft\", {\n        draft_data: formData,\n        current_step: currentStep,\n      });\n    } catch (error) {\n      console.error(\"Failed to save draft:\", error);\n      // Don't show error to user, it's background saving\n    } finally {\n      setIsSavingDraft(false);\n    }\n  };\n\n  const updateFormData = (updates: Partial<OnboardingData>) => {\n    setFormData((prev) => ({ ...prev, ...updates }));\n  };\n\n  // Step validation\n  const validateStep = (step: number): { valid: boolean; errors: string[] } => {\n    const errors: string[] = [];\n\n    switch (step) {\n      case 1: // Team Size\n        if (!formData.team_size) errors.push(\"Please select your team size\");\n        break;\n      case 2: // Identity\n        if (!formData.owner_name?.trim()) errors.push(\"Your name is required\");\n        if (!formData.owner_email?.trim()) errors.push(\"Email is required\");\n        if (formData.owner_email && !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(formData.owner_email)) {\n          errors.push(\"Invalid email address\");\n        }\n        if (!formData.owner_phone?.trim()) errors.push(\"Phone number is required\");\n        if (!formData.phone_verified) errors.push(\"Please verify your phone number\");\n        break;\n      case 3: // Business Details\n        if (!formData.business_name?.trim()) errors.push(\"Business name is required\");\n        break;\n      case 4: // Payment Setup\n        // Validate VAT registration if selected\n        if (formData.is_vat_registered === true) {\n          if (!formData.vat_number?.trim()) {\n            errors.push(\"VAT number is required when VAT registered\");\n          } else if (formData.vat_number.length !== 10) {\n            errors.push(\"VAT number must be 10 digits\");\n          } else if (!formData.vat_number.startsWith('4')) {\n            errors.push(\"South African VAT numbers must start with 4\");\n          }\n        }\n        break;\n      case 5: // Current Software\n        // Optional - no validation\n        break;\n      case 6: // Payroll\n        // Optional - no validation\n        break;\n      case 7: // Location\n        if (!formData.address?.line1?.trim()) errors.push(\"Street address is required\");\n        if (!formData.address?.city?.trim()) errors.push(\"City is required\");\n        if (!formData.address?.country?.trim()) errors.push(\"Country is required\");\n        break;\n      case 8: // Photos\n        // Optional - no validation\n        break;\n      case 9: // Service Zones\n        // Optional (can skip)\n        break;\n      case 10: // Service Categories\n        if (!formData.global_category_ids || formData.global_category_ids.length === 0) {\n          errors.push(\"Please select at least one service category\");\n        }\n        break;\n      case 11: // Service Catalog\n        // Optional - no validation\n        break;\n      case 12: // Hours\n        // Optional - no validation\n        break;\n      case 13: // Review\n        // Optional - no validation\n        break;\n      case 14: // Plan Selection\n        if (!formData.selected_plan_id?.trim()) {\n          errors.push(\"Please select a subscription plan\");\n        }\n        break;\n    }\n\n    return { valid: errors.length === 0, errors };\n  };\n\n  const handleNext = () => {\n    const validation = validateStep(currentStep);\n    \n    if (!validation.valid) {\n      validation.errors.forEach((error) => toast.error(error));\n      return;\n    }\n\n    // Skip conditional steps\n    let nextStep = currentStep + 1;\n    while (nextStep <= STEPS.length) {\n      const step = STEPS[nextStep - 1];\n      if (step.conditional && !step.conditional(formData)) {\n        nextStep++;\n      } else {\n        break;\n      }\n    }\n\n    if (nextStep <= STEPS.length) {\n      setCurrentStep(nextStep);\n    }\n  };\n\n  const handleBack = () => {\n    if (currentStep > 1) {\n      // Skip conditional steps when going back\n      let prevStep = currentStep - 1;\n      while (prevStep >= 1) {\n        const step = STEPS[prevStep - 1];\n        if (step.conditional && !step.conditional(formData)) {\n          prevStep--;\n        } else {\n          break;\n        }\n      }\n      if (prevStep >= 1) {\n        setCurrentStep(prevStep);\n      } else {\n        // If we've gone back too far, go to step 1\n        setCurrentStep(1);\n      }\n    }\n  };\n\n  const handleSkip = () => {\n    // Skip conditional steps when skipping\n    let nextStep = currentStep + 1;\n    while (nextStep <= STEPS.length) {\n      const step = STEPS[nextStep - 1];\n      if (step.conditional && !step.conditional(formData)) {\n        nextStep++;\n      } else {\n        break;\n      }\n    }\n    if (nextStep <= STEPS.length) {\n      setCurrentStep(nextStep);\n    }\n  };\n\n  const handleSubmit = async () => {\n    try {\n      setIsSubmitting(true);\n\n      // Final validation\n      const validation = validateStep(1);\n      if (!validation.valid) {\n        validation.errors.forEach((error) => toast.error(error));\n        return;\n      }\n\n      // Validate required fields\n      if (!formData.team_size) {\n        toast.error(\"Please select your team size\");\n        return;\n      }\n      if (!formData.owner_name || !formData.owner_email || !formData.owner_phone) {\n        toast.error(\"Please complete your identity information\");\n        return;\n      }\n      if (!formData.phone_verified) {\n        toast.error(\"Please verify your phone number\");\n        return;\n      }\n      if (!formData.business_name || !formData.address) {\n        toast.error(\"Please complete all required fields\");\n        return;\n      }\n\n      if (!formData.global_category_ids || formData.global_category_ids.length === 0) {\n        toast.error(\"Please select at least one service category\");\n        return;\n      }\n\n      // Submit onboarding data\n      const onboardingData = {\n        // New fields\n        team_size: formData.team_size,\n        owner_name: formData.owner_name,\n        owner_email: formData.owner_email,\n        owner_phone: formData.owner_phone,\n        yoco_machine: formData.yoco_machine || null,\n        yoco_machine_other: formData.yoco_machine_other || null,\n        payroll_type: formData.payroll_type || null,\n        payroll_details: formData.payroll_details || null,\n        // Business fields\n        business_name: formData.business_name,\n        business_type: formData.business_type,\n        description: formData.description || null,\n        previous_software: formData.previous_software || null,\n        previous_software_other: formData.previous_software_other || null,\n        // Legacy fields (mapped from owner fields)\n        phone: formData.owner_phone,\n        email: formData.owner_email,\n        address: {\n          line1: formData.address?.line1 || \"\",\n          line2: formData.address?.line2 || null,\n          city: formData.address?.city || \"\",\n          state: formData.address?.state || null,\n          postal_code: formData.address?.postal_code || null,\n          country: formData.address?.country || \"\",\n          latitude: formData.address?.latitude || null,\n          longitude: formData.address?.longitude || null,\n        },\n        global_category_ids: formData.global_category_ids || [],\n        selected_zone_ids: formData.selected_zone_ids || [],\n        operating_hours: formData.operating_hours || {},\n        services: formData.services || [],\n        // New fields for public homepage optimization\n        thumbnail_url: formData.thumbnail_url || null,\n        gallery: formData.gallery || [],\n        years_in_business: formData.years_in_business || null,\n        accepts_custom_requests: formData.accepts_custom_requests || false,\n        response_rate: formData.response_rate || 100,\n        response_time_hours: formData.response_time_hours || 1,\n        languages_spoken: formData.languages_spoken || [\"English\"],\n        social_media_links: formData.social_media_links || {},\n        website: formData.website || null,\n        tax_rate_percent: formData.tax_rate_percent || null,\n        tips_enabled: formData.tips_enabled || false,\n        cancellation_window_hours: formData.cancellation_window_hours || 24,\n        requires_deposit: formData.requires_deposit || false,\n        deposit_percentage: formData.deposit_percentage || null,\n        no_show_fee_enabled: formData.no_show_fee_enabled || false,\n        no_show_fee_amount: formData.no_show_fee_amount || null,\n        include_in_search_engines: formData.include_in_search_engines !== false, // Default to true\n        selected_plan_id: formData.selected_plan_id || null,\n      };\n\n      // Validate required fields before sending\n      if (!onboardingData.address.line1 || !onboardingData.address.city || !onboardingData.address.country) {\n        toast.error(\"Please complete all required address fields\");\n        return;\n      }\n\n      if (!onboardingData.global_category_ids || onboardingData.global_category_ids.length === 0) {\n        toast.error(\"Please select at least one service category\");\n        return;\n      }\n\n      console.log(\"Submitting onboarding data:\", JSON.stringify(onboardingData, null, 2));\n\n      const response = await fetcher.post<{\n        data: { provider: any; message: string; auto_configured?: any };\n        error: null;\n      }>(\"/api/provider/onboarding\", onboardingData);\n\n      const successMessage = response.data?.message || \"Onboarding submitted! We'll review your application.\";\n      const autoConfig = response.data?.auto_configured;\n      \n      // Show detailed success message\n      if (autoConfig && (autoConfig.zones > 0 || autoConfig.services > 0 || autoConfig.mobile_ready)) {\n        toast.success(successMessage, {\n          duration: 6000,\n        });\n      } else {\n        toast.success(successMessage, {\n          duration: 4000,\n        });\n      }\n      \n      // Small delay to let user see the success message\n      setTimeout(() => {\n        router.push(\"/provider/dashboard\");\n      }, 1500);\n    } catch (error) {\n      let errorMessage = \"Failed to submit onboarding. Please try again.\";\n      \n      if (error instanceof FetchError) {\n        console.error(\"FetchError details:\", {\n          message: error.message,\n          status: error.status,\n          code: error.code,\n          details: error.details\n        });\n        \n        // Try to extract validation errors from the details\n        if (error.details && Array.isArray(error.details)) {\n          console.error(\"Validation errors:\", JSON.stringify(error.details, null, 2));\n          // Show all validation errors - format for toast (toast doesn't support newlines well)\n          const validationErrors = error.details.map((err: any, index: number) => {\n            if (typeof err === 'string') return `${index + 1}. ${err}`;\n            const path = err.path || 'field';\n            const msg = err.message || 'Invalid value';\n            return `${index + 1}. ${path}: ${msg}`;\n          });\n          \n          // Show first error in toast, log all to console\n          if (validationErrors.length > 0) {\n            errorMessage = validationErrors[0];\n            if (validationErrors.length > 1) {\n              console.error(`Total validation errors: ${validationErrors.length}`);\n              validationErrors.forEach((err, idx) => {\n                console.error(`Error ${idx + 1}: ${err}`);\n              });\n              errorMessage += ` (and ${validationErrors.length - 1} more - see console)`;\n            }\n          }\n        } else if (error.message) {\n          errorMessage = error.message;\n        }\n      } else {\n        console.error(\"Unknown error:\", error);\n      }\n      \n      toast.error(errorMessage);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  // Get actual step index accounting for conditional steps\n  const getActualStepIndex = () => {\n    let actualIndex = 0;\n    for (let i = 0; i < STEPS.length; i++) {\n      const step = STEPS[i];\n      if (step.conditional && !step.conditional(formData)) {\n        continue;\n      }\n      actualIndex++;\n      if (i === currentStep - 1) break;\n    }\n    return actualIndex;\n  };\n\n  const currentStepData = STEPS[currentStep - 1];\n  const canSkip = currentStepData?.canSkip || false;\n  const totalVisibleSteps = STEPS.filter(s => !s.conditional || (s.conditional && s.conditional(formData))).length;\n\n  return (\n    <RoleGuard \n      allowedRoles={[\"customer\", \"provider_owner\"]} \n      redirectTo=\"/become-a-partner\"\n      showLoading={true}\n    >\n      <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-orange-50\">\n        <div className=\"w-full max-w-4xl mx-auto px-4 sm:px-6 md:px-8 py-4 sm:py-6 md:py-8\">\n          <Breadcrumb items={[\n            { label: \"Home\", href: \"/\" },\n            { label: \"Become a Partner\", href: \"/become-a-partner\" },\n            { label: \"Onboarding\" }\n          ]} />\n          \n          {/* Progress Bar - Mobile Optimized */}\n          <div className=\"mb-4 sm:mb-6 md:mb-8\">\n            {/* Mobile: Show current step number */}\n            <div className=\"sm:hidden mb-4\">\n              <div className=\"flex items-center justify-between\">\n                <p className=\"text-sm font-medium text-gray-600\">\n                  Step {getActualStepIndex()} of {totalVisibleSteps}\n                </p>\n                <p className=\"text-sm text-gray-500\">\n                  {Math.round((getActualStepIndex() / totalVisibleSteps) * 100)}% complete\n                </p>\n              </div>\n              <div className=\"mt-2 w-full bg-gray-200 rounded-full h-2\">\n                <div\n                  className=\"bg-[#FF0077] h-2 rounded-full transition-all duration-300\"\n                  style={{ width: `${(getActualStepIndex() / totalVisibleSteps) * 100}%` }}\n                />\n              </div>\n            </div>\n            \n            {/* Desktop: Full progress bar */}\n            <div className=\"hidden sm:block\">\n              <div className=\"flex items-center justify-between mb-2\">\n                {STEPS.filter(s => !s.conditional || (s.conditional && s.conditional(formData))).map((step, index, filteredSteps) => {\n                  const stepIndex = STEPS.findIndex(s => s.id === step.id);\n                  const isCompleted = currentStep > step.id;\n                  const isCurrent = currentStep === step.id;\n                  return (\n                    <div key={step.id} className=\"flex items-center flex-1\">\n                      <div className=\"flex flex-col items-center flex-1\">\n                        <div\n                          className={`w-10 h-10 sm:w-12 sm:h-12 rounded-full flex items-center justify-center border-2 transition-all duration-200 ${\n                            isCompleted || isCurrent\n                              ? \"bg-[#FF0077] border-[#FF0077] text-white shadow-md scale-110\"\n                              : \"bg-white border-gray-300 text-gray-400\"\n                          }`}\n                        >\n                          {isCompleted ? (\n                            <Check className=\"w-5 h-5 sm:w-6 sm:h-6\" />\n                          ) : (\n                            <span className=\"text-sm sm:text-base font-semibold\">{index + 1}</span>\n                          )}\n                        </div>\n                        <div className=\"mt-2 text-center\">\n                          <p\n                            className={`text-xs sm:text-sm font-medium ${\n                              isCompleted || isCurrent ? \"text-gray-900\" : \"text-gray-400\"\n                            }`}\n                          >\n                            {step.title}\n                          </p>\n                        </div>\n                      </div>\n                      {index < filteredSteps.length - 1 && (\n                        <div\n                          className={`h-1 flex-1 mx-2 transition-all duration-300 ${\n                            isCompleted ? \"bg-[#FF0077]\" : \"bg-gray-300\"\n                          }`}\n                        />\n                      )}\n                    </div>\n                  );\n                })}\n              </div>\n            </div>\n            {isSavingDraft && (\n              <p className=\"text-xs text-gray-500 text-center mt-2\">Saving progress...</p>\n            )}\n          </div>\n\n          {/* Form Content */}\n          <div className=\"bg-white rounded-xl sm:rounded-2xl shadow-lg border border-gray-100 p-4 sm:p-6 md:p-8 lg:p-10\">\n            <div className=\"mb-4 sm:mb-6 md:mb-8\">\n              <h2 className=\"text-xl sm:text-2xl md:text-3xl font-bold text-gray-900 mb-2 sm:mb-3\">\n                {currentStepData.title}\n              </h2>\n              <p className=\"text-sm sm:text-base md:text-lg text-gray-600 leading-relaxed\">\n                {currentStepData.description}\n              </p>\n            </div>\n\n            {currentStep === 1 && (\n              <Step1TeamSize data={formData} updateData={updateFormData} />\n            )}\n            {currentStep === 2 && (\n              <Step2Identity data={formData} updateData={updateFormData} />\n            )}\n            {currentStep === 3 && (\n              <Step3BusinessDetails data={formData} updateData={updateFormData} />\n            )}\n            {currentStep === 4 && (\n              <Step4PaymentSetup data={formData} updateData={updateFormData} />\n            )}\n            {currentStep === 5 && (\n              <Step5CurrentSoftware data={formData} updateData={updateFormData} />\n            )}\n            {currentStep === 6 && (\n              <Step6Payroll data={formData} updateData={updateFormData} />\n            )}\n            {currentStep === 7 && (\n              <Step7Location data={formData} updateData={updateFormData} />\n            )}\n            {currentStep === 8 && (\n              <Step8Photos data={formData} updateData={updateFormData} />\n            )}\n            {currentStep === 9 && (\n              <Step9ServiceZones data={formData} updateData={updateFormData} />\n            )}\n            {currentStep === 10 && (\n              <Step10GlobalCategories data={formData} updateData={updateFormData} />\n            )}\n            {currentStep === 11 && (\n              <Step11ServiceCatalog data={formData} updateData={updateFormData} />\n            )}\n            {currentStep === 12 && (\n              <Step12Hours data={formData} updateData={updateFormData} />\n            )}\n            {currentStep === 13 && <Step13Review data={formData} />}\n            {currentStep === 14 && (\n              <Step14PlanSelection data={formData} updateData={updateFormData} />\n            )}\n\n            {/* Navigation */}\n            <div className=\"flex flex-col sm:flex-row justify-between gap-3 sm:gap-4 mt-6 sm:mt-8 md:mt-10 pt-4 sm:pt-6 md:pt-8 border-t border-gray-200\">\n              <Button\n                variant=\"outline\"\n                onClick={handleBack}\n                disabled={currentStep === 1}\n                className=\"w-full sm:w-auto h-12 sm:h-14 text-base font-semibold border-2 border-gray-300 hover:border-gray-400 rounded-lg\"\n              >\n                <ChevronLeft className=\"w-5 h-5 mr-2\" />\n                Back\n              </Button>\n              <div className=\"flex gap-3 sm:gap-4 w-full sm:w-auto\">\n                {canSkip && currentStep < STEPS.length && (\n                  <Button \n                    variant=\"outline\" \n                    onClick={handleSkip}\n                    className=\"flex-1 sm:flex-none h-12 sm:h-14 text-base font-semibold border-2 border-gray-300 hover:border-gray-400 rounded-lg\"\n                  >\n                    Skip for now\n                  </Button>\n                )}\n                {currentStep < STEPS.length ? (\n                  <Button \n                    onClick={handleNext} \n                    className=\"flex-1 sm:flex-none bg-[#FF0077] hover:bg-[#D60565] text-white h-12 sm:h-14 text-base font-semibold rounded-lg shadow-md hover:shadow-lg transition-all\"\n                  >\n                    Next\n                    <ChevronRight className=\"w-5 h-5 ml-2\" />\n                  </Button>\n                ) : (\n                  <Button \n                    onClick={handleSubmit} \n                    disabled={isSubmitting} \n                    className=\"flex-1 sm:flex-none bg-[#FF0077] hover:bg-[#D60565] text-white h-12 sm:h-14 text-base font-semibold rounded-lg shadow-md hover:shadow-lg transition-all disabled:opacity-50\"\n                  >\n                    {isSubmitting ? \"Submitting...\" : \"Submit\"}\n                  </Button>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </RoleGuard>\n  );\n}\n\n// Step 1: Team Size - Beautiful Airbnb-style card selection\nfunction Step1TeamSize({\n  data,\n  updateData,\n}: {\n  data: Partial<OnboardingData>;\n  updateData: (updates: Partial<OnboardingData>) => void;\n}) {\n  const teamSizeOptions = [\n    {\n      id: \"freelancer\",\n      title: \"Freelancer or Solo\",\n      subtitle: \"It's just me\",\n      description: \"Perfect for independent professionals\",\n      badge: \"Most Popular\",\n      icon: \"≡ƒæñ\",\n    },\n    {\n      id: \"small\",\n      title: \"Small Team\",\n      subtitle: \"2 ΓÇô 10 staff members\",\n      description: \"Growing business with a small team\",\n      icon: \"≡ƒæÑ\",\n    },\n    {\n      id: \"medium\",\n      title: \"Medium Team\",\n      subtitle: \"11 ΓÇô 20 staff members\",\n      description: \"Established business with a solid team\",\n      icon: \"≡ƒæ¿ΓÇì≡ƒæ⌐ΓÇì≡ƒæºΓÇì≡ƒæª\",\n    },\n    {\n      id: \"large\",\n      title: \"Large Team\",\n      subtitle: \"20+ staff members\",\n      description: \"Large operation with multiple staff\",\n      icon: \"≡ƒÅó\",\n    },\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"text-center mb-8\">\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n          Tell us about your team\n        </h3>\n        <p className=\"text-base text-gray-600\">\n          How many staff members are there?\n        </p>\n        <p className=\"text-sm text-gray-500 mt-2\">\n          This helps us customize your setup experience\n        </p>\n      </div>\n      \n      <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n        {teamSizeOptions.map((option) => {\n          const isSelected = data.team_size === option.id;\n          return (\n            <button\n              key={option.id}\n              type=\"button\"\n              onClick={() => {\n                updateData({ team_size: option.id as any });\n                // Auto-set business_type based on team size\n                if (option.id === \"freelancer\") {\n                  updateData({ business_type: \"mobile\" });\n                } else {\n                  updateData({ business_type: \"salon\" });\n                }\n              }}\n              className={`relative p-6 rounded-2xl border-2 transition-all duration-200 text-left hover:shadow-lg ${\n                isSelected\n                  ? \"border-[#FF0077] bg-[#FF0077]/5 shadow-md\"\n                  : \"border-gray-200 hover:border-gray-300 bg-white\"\n              }`}\n            >\n              {option.badge && (\n                <span className=\"absolute top-3 right-3 text-xs font-semibold bg-[#FF0077] text-white px-2 py-1 rounded-full\">\n                  {option.badge}\n                </span>\n              )}\n              <div className=\"flex items-start gap-4\">\n                <div className=\"text-4xl\">{option.icon}</div>\n                <div className=\"flex-1\">\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-1\">\n                    {option.title}\n                  </h3>\n                  <p className=\"text-sm font-medium text-gray-700 mb-2\">\n                    {option.subtitle}\n                  </p>\n                  <p className=\"text-xs text-gray-500\">\n                    {option.description}\n                  </p>\n                </div>\n                <div className={`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${\n                  isSelected\n                    ? \"border-[#FF0077] bg-[#FF0077]\"\n                    : \"border-gray-300\"\n                }`}>\n                  {isSelected && (\n                    <Check className=\"w-4 h-4 text-white\" />\n                  )}\n                </div>\n              </div>\n            </button>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n\n// Legacy Step1BusinessInfo - keeping for reference, will be replaced\nfunction Step1BusinessInfo({\n  data,\n  updateData,\n}: {\n  data: Partial<OnboardingData>;\n  updateData: (updates: Partial<OnboardingData>) => void;\n}) {\n  const [previousSoftwareOptions, setPreviousSoftwareOptions] = useState<Array<{ id: string; name: string; slug: string }>>([]);\n  const [isLoadingSoftwareOptions, setIsLoadingSoftwareOptions] = useState(true);\n\n  useEffect(() => {\n    const loadPreviousSoftwareOptions = async () => {\n      try {\n        const response = await fetcher.get<{ data: Array<{ id: string; name: string; slug: string }> }>(\"/api/public/previous-software-options\");\n        setPreviousSoftwareOptions(response.data || []);\n      } catch (error) {\n        console.error(\"Error loading previous software options:\", error);\n        // Fallback to empty array - the select will just be empty\n        setPreviousSoftwareOptions([]);\n      } finally {\n        setIsLoadingSoftwareOptions(false);\n      }\n    };\n    loadPreviousSoftwareOptions();\n  }, []);\n  return (\n    <div className=\"space-y-4 sm:space-y-5 md:space-y-6\">\n      <Alert className=\"bg-blue-50 border-blue-200\">\n        <Sparkles className=\"w-4 h-4 text-blue-600\" />\n        <AlertDescription className=\"text-blue-800 text-sm\">\n          <strong>Quick Setup:</strong> We'll automatically configure most settings for you! \n          {data.business_type === \"mobile\" && \" As a freelancer, we'll mark you as mobile-ready and help you select service zones.\"}\n          {data.business_type === \"both\" && \" We'll help you set up both salon and mobile services.\"}\n          {(!data.business_type || data.business_type === \"salon\") && \" We'll help you get started quickly with smart defaults.\"}\n        </AlertDescription>\n      </Alert>\n\n      <div>\n        <Label htmlFor=\"business_name\" className=\"text-sm sm:text-base font-semibold text-gray-900 mb-2 block\">\n          Business Name <span className=\"text-[#FF0077]\">*</span>\n        </Label>\n        <Input\n          id=\"business_name\"\n          value={data.business_name || \"\"}\n          onChange={(e) => updateData({ business_name: e.target.value })}\n          placeholder=\"Enter your business name\"\n          className=\"h-12 sm:h-14 text-base border-gray-300 focus:border-[#FF0077] focus:ring-[#FF0077] rounded-lg\"\n          required\n        />\n      </div>\n      <div>\n        <Label htmlFor=\"business_type\" className=\"text-sm sm:text-base font-semibold text-gray-900 mb-2 block\">\n          Business Type <span className=\"text-[#FF0077]\">*</span>\n        </Label>\n        <select\n          id=\"business_type\"\n          value={data.business_type || \"salon\"}\n          onChange={(e) => {\n            const newType = e.target.value as any;\n            updateData({ business_type: newType });\n            \n            // Show helpful message about what will be auto-configured\n            if (newType === \"mobile\") {\n              toast.info(\"We'll automatically mark you as mobile-ready and help you set up service zones!\", { duration: 4000 });\n            }\n          }}\n          className=\"w-full h-12 sm:h-14 px-4 text-base border border-gray-300 rounded-lg focus:border-[#FF0077] focus:ring-[#FF0077] bg-white\"\n        >\n          <option value=\"salon\">Salon/Studio (Fixed Location)</option>\n          <option value=\"mobile\">Freelancer (Mobile/At-Home Services)</option>\n          <option value=\"both\">Both (Salon + Mobile Services)</option>\n        </select>\n        <p className=\"text-xs sm:text-sm text-gray-600 mt-2 leading-relaxed\">\n          {data.business_type === \"mobile\" && (\n            <span>\n              <strong>Freelancer mode:</strong> You'll be automatically set up as mobile-ready staff. \n              We'll help you select service zones where you can provide at-home services.\n            </span>\n          )}\n          {data.business_type === \"salon\" && (\n            <span>Salons have a fixed location where customers visit for services.</span>\n          )}\n          {data.business_type === \"both\" && (\n            <span>\n              <strong>Hybrid mode:</strong> You operate both a fixed location and provide mobile/at-home services. \n              We'll help you configure both.\n            </span>\n          )}\n          {!data.business_type && (\n            <span>Select your business model. You can upgrade from freelancer to salon later.</span>\n          )}\n        </p>\n      </div>\n      <div>\n        <Label htmlFor=\"website\" className=\"text-sm sm:text-base font-semibold text-gray-900 mb-2 block\">\n          Website URL\n          <span className=\"text-gray-500 font-normal text-xs sm:text-sm ml-2\">(Optional but recommended)</span>\n        </Label>\n        <Input\n          id=\"website\"\n          type=\"url\"\n          value={data.website || \"\"}\n          onChange={(e) => {\n            let value = e.target.value.trim();\n            // Auto-add https:// if missing\n            if (value && !value.match(/^https?:\\/\\//)) {\n              value = `https://${value}`;\n            }\n            updateData({ website: value || undefined });\n          }}\n          placeholder=\"https://yourwebsite.com\"\n          className=\"h-12 sm:h-14 text-base border-gray-300 focus:border-[#FF0077] focus:ring-[#FF0077] rounded-lg\"\n        />\n        <p className=\"text-xs sm:text-sm text-gray-600 mt-1\">\n          Your website helps customers learn more about you and improves your search visibility.\n        </p>\n      </div>\n      <div>\n        <Label htmlFor=\"years_in_business\" className=\"text-sm sm:text-base font-semibold text-gray-900 mb-2 block\">\n          Years in Business\n          <span className=\"text-gray-500 font-normal text-xs sm:text-sm ml-2\">(Optional)</span>\n        </Label>\n        <select\n          id=\"years_in_business\"\n          value={data.years_in_business || \"\"}\n          onChange={(e) => {\n            const value = e.target.value;\n            updateData({ years_in_business: value ? parseInt(value) : undefined });\n          }}\n          className=\"w-full h-12 sm:h-14 px-4 text-base border border-gray-300 rounded-lg focus:border-[#FF0077] focus:ring-[#FF0077] bg-white\"\n        >\n          <option value=\"\">Select years...</option>\n          <option value=\"0\">Just starting (0 years)</option>\n          <option value=\"1\">1 year</option>\n          <option value=\"2\">2 years</option>\n          <option value=\"3\">3 years</option>\n          <option value=\"4\">4 years</option>\n          <option value=\"5\">5 years</option>\n          <option value=\"6\">6-10 years</option>\n          <option value=\"11\">11-15 years</option>\n          <option value=\"16\">16-20 years</option>\n          <option value=\"21\">20+ years</option>\n        </select>\n        <p className=\"text-xs sm:text-sm text-gray-600 mt-1\">\n          Your experience helps build trust with customers.\n        </p>\n      </div>\n      <div>\n        <Label htmlFor=\"description\" className=\"text-sm sm:text-base font-semibold text-gray-900 mb-2 block\">\n          Business Description\n          <span className=\"text-gray-500 font-normal text-xs sm:text-sm ml-2\">\n            (Recommended: 50-500 characters)\n          </span>\n        </Label>\n        <Textarea\n          id=\"description\"\n          value={data.description || \"\"}\n          onChange={(e) => {\n            const value = e.target.value;\n            if (value.length <= 2000) {\n              updateData({ description: value });\n            }\n          }}\n          placeholder=\"Tell customers about your business, your expertise, what makes you unique, and what they can expect...\"\n          className=\"min-h-[120px] sm:min-h-[140px] text-base border-gray-300 focus:border-[#FF0077] focus:ring-[#FF0077] rounded-lg resize-none\"\n          maxLength={2000}\n        />\n        <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 mt-2\">\n          <p className=\"text-xs sm:text-sm text-gray-600\">\n            {data.description && data.description.length < 50 ? (\n              <span className=\"text-amber-600 font-medium\">\n                Consider adding more details ({data.description.length}/50 minimum recommended)\n              </span>\n            ) : (\n              <span>\n                {data.description?.length || 0}/2000 characters\n                {data.description && data.description.length >= 50 && (\n                  <span className=\"text-green-600 ml-2 font-medium\">Γ£ô Good length</span>\n                )}\n              </span>\n            )}\n          </p>\n          <button\n            type=\"button\"\n            onClick={() => {\n              const templates = [\n                \"Welcome to [Business Name]! We specialize in [service type] with [X] years of experience. Our team is dedicated to providing exceptional service in a relaxing, professional environment. We use only premium products and stay up-to-date with the latest techniques and trends.\",\n                \"At [Business Name], we believe beauty is an art form. Our skilled professionals are passionate about helping you look and feel your best. From [service 1] to [service 2], we offer a full range of services tailored to your unique needs.\",\n                \"[Business Name] is your trusted partner for all your beauty and wellness needs. Located in [location], we've been serving the community since [year]. Our commitment to excellence and customer satisfaction sets us apart.\",\n              ];\n              const randomTemplate = templates[Math.floor(Math.random() * templates.length)];\n              updateData({ description: randomTemplate });\n            }}\n            className=\"text-xs sm:text-sm text-[#FF0077] hover:text-[#D60565] font-medium hover:underline transition-colors\"\n          >\n            Use template\n          </button>\n        </div>\n      </div>\n      <div>\n        <Label htmlFor=\"previous_software\" className=\"text-sm sm:text-base font-semibold text-gray-900 mb-2 block\">\n          Previous Salon Software <span className=\"text-gray-500 font-normal\">(Optional)</span>\n        </Label>\n        {isLoadingSoftwareOptions ? (\n          <div className=\"h-12 sm:h-14 border border-gray-300 rounded-lg flex items-center justify-center\">\n            <p className=\"text-sm text-gray-500\">Loading options...</p>\n          </div>\n        ) : (\n          <select\n            id=\"previous_software\"\n            value={data.previous_software || \"\"}\n            onChange={(e) => {\n              updateData({ \n                previous_software: e.target.value || undefined,\n                previous_software_other: e.target.value !== \"other\" ? undefined : data.previous_software_other\n              });\n            }}\n            className=\"w-full h-12 sm:h-14 px-4 text-base border border-gray-300 rounded-lg focus:border-[#FF0077] focus:ring-[#FF0077] bg-white\"\n          >\n            {previousSoftwareOptions.length > 0 ? (\n              previousSoftwareOptions.map((option) => (\n                <option key={option.id} value={option.slug}>\n                  {option.name}\n                </option>\n              ))\n            ) : (\n              // Fallback if API fails\n              <>\n                <option value=\"\">None / First time using salon software</option>\n                <option value=\"other\">Other (please specify)</option>\n              </>\n            )}\n          </select>\n        )}\n        {data.previous_software === \"other\" && (\n          <Input\n            id=\"previous_software_other\"\n            value={data.previous_software_other || \"\"}\n            onChange={(e) => updateData({ previous_software_other: e.target.value })}\n            placeholder=\"Enter the name of the software\"\n            className=\"mt-3 h-12 sm:h-14 text-base border-gray-300 focus:border-[#FF0077] focus:ring-[#FF0077] rounded-lg\"\n          />\n        )}\n        <p className=\"text-xs sm:text-sm text-gray-600 mt-2 leading-relaxed\">\n          Help us understand where providers are coming from. This information is only visible to administrators.\n        </p>\n      </div>\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 md:gap-5\">\n        <div>\n          <Label htmlFor=\"phone\" className=\"text-sm sm:text-base font-semibold text-gray-900 mb-2 block\">\n            Phone <span className=\"text-[#FF0077]\">*</span>\n          </Label>\n          <Input\n            id=\"phone\"\n            type=\"tel\"\n            value={data.phone || \"\"}\n            onChange={(e) => updateData({ phone: e.target.value })}\n            placeholder=\"+27 12 345 6789\"\n            className=\"h-12 sm:h-14 text-base border-gray-300 focus:border-[#FF0077] focus:ring-[#FF0077] rounded-lg\"\n            required\n          />\n        </div>\n        <div>\n          <Label htmlFor=\"email\" className=\"text-sm sm:text-base font-semibold text-gray-900 mb-2 block\">\n            Email <span className=\"text-[#FF0077]\">*</span>\n          </Label>\n          <Input\n            id=\"email\"\n            type=\"email\"\n            value={data.email || \"\"}\n            onChange={(e) => updateData({ email: e.target.value })}\n            placeholder=\"business@example.com\"\n            className=\"h-12 sm:h-14 text-base border-gray-300 focus:border-[#FF0077] focus:ring-[#FF0077] rounded-lg\"\n            required\n          />\n        </div>\n      </div>\n      <div>\n        <Label htmlFor=\"languages_spoken\" className=\"text-sm sm:text-base font-semibold text-gray-900 mb-2 block\">\n          Languages You Speak\n          <span className=\"text-gray-500 font-normal text-xs sm:text-sm ml-2\">(Optional)</span>\n        </Label>\n        <p className=\"text-xs sm:text-sm text-gray-600 mb-2\">\n          Select the human languages you can communicate in with clients (e.g., English, Zulu, Afrikaans, Xhosa, etc.). \n          This helps clients find providers who speak their language.\n        </p>\n        <div className=\"flex flex-wrap gap-2\">\n          {[\"English\", \"Afrikaans\", \"Zulu\", \"Xhosa\", \"Sesotho\", \"Tswana\", \"Venda\", \"Tsonga\", \"Swati\", \"Ndebele\", \"Southern Sotho\", \"Northern Sotho\"].map((lang) => {\n            const isSelected = (data.languages_spoken || [\"English\"]).includes(lang);\n            return (\n              <button\n                key={lang}\n                type=\"button\"\n                onClick={() => {\n                  const current = data.languages_spoken || [\"English\"];\n                  if (isSelected) {\n                    // Don't allow removing if it's the only one\n                    if (current.length > 1) {\n                      updateData({ languages_spoken: current.filter((l) => l !== lang) });\n                    }\n                  } else {\n                    updateData({ languages_spoken: [...current, lang] });\n                  }\n                }}\n                className={`px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${\n                  isSelected\n                    ? \"bg-[#FF0077] text-white border-2 border-[#FF0077]\"\n                    : \"bg-white text-gray-700 border-2 border-gray-300 hover:border-[#FF0077] hover:text-[#FF0077]\"\n                } ${isSelected && (data.languages_spoken || [\"English\"]).length === 1 ? \"cursor-not-allowed opacity-75\" : \"cursor-pointer\"}`}\n                disabled={isSelected && (data.languages_spoken || [\"English\"]).length === 1}\n                title={isSelected && (data.languages_spoken || [\"English\"]).length === 1 ? \"At least one language is required\" : \"\"}\n              >\n                {lang}\n                {isSelected && (data.languages_spoken || [\"English\"]).length > 1 && (\n                  <span className=\"ml-1\">├ù</span>\n                )}\n              </button>\n            );\n          })}\n        </div>\n        <p className=\"text-xs text-gray-500 mt-2\">\n          Selected: {(data.languages_spoken || [\"English\"]).join(\", \")}\n        </p>\n      </div>\n    </div>\n  );\n}\n\n// Step 2: Identity - Name, Email, Phone with Verification\nfunction Step2Identity({\n  data,\n  updateData,\n}: {\n  data: Partial<OnboardingData>;\n  updateData: (updates: Partial<OnboardingData>) => void;\n}) {\n  const [isSendingCode, setIsSendingCode] = useState(false);\n  const [isVerifying, setIsVerifying] = useState(false);\n  const [verificationCode, setVerificationCode] = useState(\"\");\n  const [codeSent, setCodeSent] = useState(false);\n  const [countdown, setCountdown] = useState(0);\n\n  // Countdown timer\n  useEffect(() => {\n    if (countdown > 0) {\n      const timer = setTimeout(() => setCountdown(countdown - 1), 1000);\n      return () => clearTimeout(timer);\n    }\n  }, [countdown]);\n\n  const handleSendCode = async () => {\n    if (!data.owner_phone) {\n      toast.error(\"Please enter your phone number first\");\n      return;\n    }\n\n    try {\n      setIsSendingCode(true);\n      const response = await fetcher.post(\"/api/provider/onboarding/verify-phone\", {\n        phone: data.owner_phone,\n      });\n      \n      setCodeSent(true);\n      setCountdown(300); // 5 minutes\n      toast.success(\"Verification code sent to your phone\");\n    } catch (error) {\n      toast.error(\"Failed to send verification code. Please try again.\");\n      console.error(\"Error sending code:\", error);\n    } finally {\n      setIsSendingCode(false);\n    }\n  };\n\n  const handleVerifyCode = async () => {\n    if (!verificationCode || verificationCode.length !== 4) {\n      toast.error(\"Please enter a 4-digit code\");\n      return;\n    }\n\n    try {\n      setIsVerifying(true);\n      const response = await fetcher.put<{ data?: { verified?: boolean } }>(\"/api/provider/onboarding/verify-phone/verify\", {\n        phone: data.owner_phone,\n        code: verificationCode,\n      });\n\n      if (response?.data?.verified) {\n        updateData({ phone_verified: true });\n        toast.success(\"Phone number verified!\");\n      } else {\n        toast.error(\"Invalid verification code. Please try again.\");\n      }\n    } catch (error) {\n      toast.error(\"Verification failed. Please try again.\");\n      console.error(\"Error verifying code:\", error);\n    } finally {\n      setIsVerifying(false);\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-5 mb-6\">\n        <div className=\"flex items-start gap-3\">\n          <div className=\"flex-shrink-0 w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center\">\n            <span className=\"text-white text-sm font-bold\">!</span>\n          </div>\n          <div>\n            <h4 className=\"font-semibold text-blue-900 mb-1\">Salon Owner Information</h4>\n            <p className=\"text-sm text-blue-800 leading-relaxed\">\n              We assume you are the salon owner creating this account. Please provide your personal details below. \n              This information will be used for account verification and communication.\n            </p>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"space-y-5\">\n        {/* Name */}\n        <div>\n          <Label htmlFor=\"owner_name\" className=\"text-base font-semibold text-gray-900 mb-2 block\">\n            Your Name <span className=\"text-[#FF0077]\">*</span>\n          </Label>\n          <Input\n            id=\"owner_name\"\n            value={data.owner_name || \"\"}\n            onChange={(e) => updateData({ owner_name: e.target.value })}\n            placeholder=\"Enter your full name\"\n            className=\"h-14 text-base border-gray-300 focus:border-[#FF0077] focus:ring-[#FF0077] rounded-xl\"\n            required\n          />\n        </div>\n\n        {/* Email */}\n        <div>\n          <Label htmlFor=\"owner_email\" className=\"text-base font-semibold text-gray-900 mb-2 block\">\n            Email Address <span className=\"text-[#FF0077]\">*</span>\n          </Label>\n          <Input\n            id=\"owner_email\"\n            type=\"email\"\n            value={data.owner_email || \"\"}\n            onChange={(e) => updateData({ owner_email: e.target.value })}\n            placeholder=\"your.email@example.com\"\n            className=\"h-14 text-base border-gray-300 focus:border-[#FF0077] focus:ring-[#FF0077] rounded-xl\"\n            required\n          />\n        </div>\n\n        {/* Phone with Verification */}\n        <div>\n          <Label htmlFor=\"owner_phone\" className=\"text-base font-semibold text-gray-900 mb-2 block\">\n            Mobile Number <span className=\"text-[#FF0077]\">*</span>\n          </Label>\n          <div className=\"flex gap-3\">\n            <Input\n              id=\"owner_phone\"\n              type=\"tel\"\n              value={data.owner_phone || \"\"}\n              onChange={(e) => {\n                const phone = e.target.value.replace(/\\D/g, \"\");\n                updateData({ owner_phone: phone, phone_verified: false });\n                setCodeSent(false);\n                setVerificationCode(\"\");\n              }}\n              placeholder=\"0821234567\"\n              className=\"flex-1 h-14 text-base border-gray-300 focus:border-[#FF0077] focus:ring-[#FF0077] rounded-xl\"\n              required\n            />\n            <Button\n              type=\"button\"\n              onClick={handleSendCode}\n              disabled={!data.owner_phone || isSendingCode || countdown > 0}\n              className=\"h-14 px-6 bg-[#FF0077] hover:bg-[#D60565] text-white rounded-xl disabled:opacity-50\"\n            >\n              {isSendingCode ? (\n                <Loader2 className=\"w-5 h-5 animate-spin\" />\n              ) : countdown > 0 ? (\n                `Resend (${Math.floor(countdown / 60)}:${String(countdown % 60).padStart(2, '0')})`\n              ) : (\n                \"Send Code\"\n              )}\n            </Button>\n          </div>\n          <p className=\"text-xs text-gray-500 mt-2\">\n            We'll send a 4-digit verification code via SMS to verify your number. This helps us keep your account secure.\n          </p>\n\n          {/* Verification Code Input */}\n          {codeSent && (\n            <div className=\"mt-4 space-y-3\">\n              <Label htmlFor=\"verification_code\" className=\"text-base font-semibold text-gray-900 mb-2 block\">\n                Enter Verification Code <span className=\"text-[#FF0077]\">*</span>\n              </Label>\n              <div className=\"flex gap-3\">\n                <Input\n                  id=\"verification_code\"\n                  type=\"text\"\n                  maxLength={4}\n                  value={verificationCode}\n                  onChange={(e) => {\n                    const code = e.target.value.replace(/\\D/g, \"\").slice(0, 4);\n                    setVerificationCode(code);\n                  }}\n                  placeholder=\"1234\"\n                  className=\"h-14 text-2xl text-center font-bold tracking-widest border-gray-300 focus:border-[#FF0077] focus:ring-[#FF0077] rounded-xl\"\n                />\n                <Button\n                  type=\"button\"\n                  onClick={handleVerifyCode}\n                  disabled={verificationCode.length !== 4 || isVerifying || data.phone_verified}\n                  className=\"h-14 px-6 bg-[#FF0077] hover:bg-[#D60565] text-white rounded-xl disabled:opacity-50\"\n                >\n                  {isVerifying ? (\n                    <Loader2 className=\"w-5 h-5 animate-spin\" />\n                  ) : data.phone_verified ? (\n                    <Check className=\"w-5 h-5\" />\n                  ) : (\n                    \"Verify\"\n                  )}\n                </Button>\n              </div>\n              {data.phone_verified && (\n                <div className=\"flex items-center gap-2 text-green-600 text-sm font-medium\">\n                  <Check className=\"w-4 h-4\" />\n                  Phone number verified\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Step 8: Photos - Thumbnail and Gallery\nfunction Step8Photos({\n  data,\n  updateData,\n}: {\n  data: Partial<OnboardingData>;\n  updateData: (updates: Partial<OnboardingData>) => void;\n}) {\n  const [thumbnailFile, setThumbnailFile] = useState<File | null>(null);\n  const [thumbnailPreview, setThumbnailPreview] = useState<string | null>(data.thumbnail_url || null);\n  const [galleryFiles, setGalleryFiles] = useState<File[]>([]);\n  const [galleryPreviews, setGalleryPreviews] = useState<string[]>(data.gallery || []);\n  const thumbnailInputRef = useRef<HTMLInputElement>(null);\n  const galleryInputRef = useRef<HTMLInputElement>(null);\n\n  const handleThumbnailSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n\n    if (!validateFileType(file, IMAGE_CONSTRAINTS.allowedTypes)) {\n      toast.error(\"Invalid file type. Please upload a JPEG, PNG, or WebP image.\");\n      return;\n    }\n\n    if (!validateFileSize(file, IMAGE_CONSTRAINTS.maxSizeBytes)) {\n      toast.error(\"File too large. Maximum size is 5MB.\");\n      return;\n    }\n\n    setThumbnailFile(file);\n    const reader = new FileReader();\n    reader.onloadend = () => {\n      setThumbnailPreview(reader.result as string);\n    };\n    reader.readAsDataURL(file);\n  };\n\n  const handleGallerySelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = Array.from(e.target.files || []);\n    if (files.length === 0) return;\n\n    const validFiles: File[] = [];\n    for (const file of files) {\n      if (!validateFileType(file, IMAGE_CONSTRAINTS.allowedTypes)) {\n        toast.error(`${file.name}: Invalid file type`);\n        continue;\n      }\n      if (!validateFileSize(file, IMAGE_CONSTRAINTS.maxSizeBytes)) {\n        toast.error(`${file.name}: File too large (max 5MB)`);\n        continue;\n      }\n      validFiles.push(file);\n    }\n\n    if (validFiles.length === 0) return;\n\n    setGalleryFiles([...galleryFiles, ...validFiles]);\n    validFiles.forEach((file) => {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setGalleryPreviews((prev) => [...prev, reader.result as string]);\n      };\n      reader.readAsDataURL(file);\n    });\n  };\n\n  const removeGalleryImage = (index: number) => {\n    const newPreviews = galleryPreviews.filter((_, i) => i !== index);\n    const newFiles = galleryFiles.filter((_, i) => i !== index);\n    setGalleryPreviews(newPreviews);\n    setGalleryFiles(newFiles);\n  };\n\n  // Store files in formData for later upload (after provider creation)\n  useEffect(() => {\n    // Note: We'll upload these after provider is created in the API\n    // For now, just store previews\n  }, [thumbnailFile, galleryFiles]);\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-xl p-5 mb-6\">\n        <div className=\"flex items-start gap-3\">\n          <div className=\"flex-shrink-0 w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center\">\n            <ImageIcon className=\"w-5 h-5 text-white\" />\n          </div>\n          <div>\n            <h4 className=\"font-semibold text-purple-900 mb-2\">Why Photos Matter</h4>\n            {data.business_type === \"mobile\" ? (\n              <div className=\"text-sm text-purple-800 space-y-2\">\n                <p>\n                  <strong>Your Photo:</strong> A professional photo of yourself is crucial. People are 2-3x more likely to click on a human face than a logo.\n                </p>\n                <p>\n                  <strong>Portfolio Gallery:</strong> Showcase your completed work, before/after transformations, and service examples. This builds trust and helps customers see your quality.\n                </p>\n              </div>\n            ) : (\n              <div className=\"text-sm text-purple-800 space-y-2\">\n                <p>\n                  <strong>Salon/Owner Photo:</strong> A photo of your salon interior/exterior or yourself as the owner is crucial. People are 2-3x more likely to click on real photos than logos.\n                </p>\n                <p>\n                  <strong>Portfolio Gallery:</strong> Showcase your completed work, before/after transformations, and service examples. This builds trust and helps customers see your quality.\n                </p>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* Thumbnail Upload */}\n      <div>\n        <Label className=\"text-sm sm:text-base font-semibold text-gray-900 mb-2 block\">\n          {data.business_type === \"mobile\" ? \"Your Photo\" : \"Salon Photo or Owner Photo\"}\n          <span className=\"text-gray-500 font-normal text-xs sm:text-sm ml-2\">(Recommended)</span>\n        </Label>\n        <p className=\"text-xs sm:text-sm text-gray-600 mb-3\">\n          {data.business_type === \"mobile\" ? (\n            <>\n              <strong>For freelancers:</strong> Upload a professional photo of yourself. People are more likely to click on a human face than a logo. \n              This helps build trust and personal connection with clients. Use a square image (recommended: 800x800px or larger).\n            </>\n          ) : (\n            <>\n              <strong>For salons:</strong> Upload a photo of your salon interior/exterior or a professional photo of yourself as the owner. \n              People are more likely to click on real photos than logos. This helps build trust and shows your space or team. \n              Use a square image (recommended: 800x800px or larger).\n            </>\n          )}\n        </p>\n        <div className=\"flex flex-col sm:flex-row gap-4\">\n          {thumbnailPreview ? (\n            <div className=\"relative w-full sm:w-48 h-48 border-2 border-gray-200 rounded-lg overflow-hidden\">\n              <Image\n                src={thumbnailPreview}\n                alt=\"Thumbnail preview\"\n                fill\n                className=\"object-cover\"\n              />\n              <Button\n                type=\"button\"\n                variant=\"destructive\"\n                size=\"sm\"\n                className=\"absolute top-2 right-2\"\n                onClick={() => {\n                  setThumbnailFile(null);\n                  setThumbnailPreview(null);\n                  updateData({ thumbnail_url: undefined });\n                  if (thumbnailInputRef.current) {\n                    thumbnailInputRef.current.value = \"\";\n                  }\n                }}\n              >\n                <X className=\"w-4 h-4\" />\n              </Button>\n            </div>\n          ) : (\n            <div className=\"w-full sm:w-48 h-48 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center bg-gray-50\">\n              <div className=\"text-center p-4\">\n                <ImageIcon className=\"w-12 h-12 text-gray-400 mx-auto mb-2\" />\n                <p className=\"text-xs text-gray-600\">No thumbnail</p>\n              </div>\n            </div>\n          )}\n          <div className=\"flex-1\">\n            <Input\n              ref={thumbnailInputRef}\n              type=\"file\"\n              accept=\"image/jpeg,image/png,image/webp\"\n              onChange={handleThumbnailSelect}\n              className=\"hidden\"\n              id=\"thumbnail-upload\"\n            />\n            <Label\n              htmlFor=\"thumbnail-upload\"\n              className=\"cursor-pointer inline-flex items-center justify-center px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\"\n            >\n              <Upload className=\"w-4 h-4 mr-2\" />\n              {thumbnailPreview ? \"Change Thumbnail\" : \"Upload Thumbnail\"}\n            </Label>\n            {thumbnailFile && (\n              <p className=\"text-xs text-gray-600 mt-2\">\n                {thumbnailFile.name} ({(thumbnailFile.size / 1024 / 1024).toFixed(2)} MB)\n              </p>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* Gallery Upload */}\n      <div>\n        <Label className=\"text-sm sm:text-base font-semibold text-gray-900 mb-2 block\">\n          Portfolio / Work Gallery\n          <span className=\"text-gray-500 font-normal text-xs sm:text-sm ml-2\">(Optional but recommended)</span>\n        </Label>\n        <p className=\"text-xs sm:text-sm text-gray-600 mb-3\">\n          <strong>Showcase your work:</strong> Upload photos of your completed work, before/after transformations, or examples of your services. \n          This is your portfolio that helps clients see the quality of your work. You can add up to 10 images. Minimum 3 recommended for best results.\n        </p>\n        <Input\n          ref={galleryInputRef}\n          type=\"file\"\n          accept=\"image/jpeg,image/png,image/webp\"\n          multiple\n          onChange={handleGallerySelect}\n          className=\"hidden\"\n          id=\"gallery-upload\"\n        />\n        <Label\n          htmlFor=\"gallery-upload\"\n          className=\"cursor-pointer inline-flex items-center justify-center px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors mb-4\"\n        >\n              <Upload className=\"w-4 h-4 mr-2\" />\n          Add Portfolio Images\n        </Label>\n\n        {galleryPreviews.length > 0 && (\n          <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 mt-4\">\n            {galleryPreviews.map((preview, index) => (\n              <div key={index} className=\"relative aspect-square border-2 border-gray-200 rounded-lg overflow-hidden\">\n                <Image\n                  src={preview}\n                  alt={`Gallery image ${index + 1}`}\n                  fill\n                  className=\"object-cover\"\n                />\n                <Button\n                  type=\"button\"\n                  variant=\"destructive\"\n                  size=\"sm\"\n                  className=\"absolute top-2 right-2\"\n                  onClick={() => removeGalleryImage(index)}\n                >\n                  <X className=\"w-3 h-3\" />\n                </Button>\n              </div>\n            ))}\n          </div>\n        )}\n\n        {galleryFiles.length > 0 && (\n          <div className=\"mt-4 p-3 bg-gray-50 rounded-lg\">\n            <p className=\"text-xs text-gray-600\">\n              {galleryFiles.length} image{galleryFiles.length !== 1 ? \"s\" : \"\"} ready to upload after onboarding\n            </p>\n          </div>\n        )}\n      </div>\n\n      {(!thumbnailPreview && galleryPreviews.length === 0) && (\n        <Alert className=\"bg-amber-50 border-amber-200\">\n          <AlertCircle className=\"w-4 h-4 text-amber-600\" />\n          <AlertDescription className=\"text-amber-800 text-sm\">\n            <strong>Tip:</strong> Providers with photos get 3x more views! Your portfolio gallery helps clients see your work quality. \n            You can skip this step and add photos later, but we recommend adding at least a thumbnail now to improve your visibility in search results.\n          </AlertDescription>\n        </Alert>\n      )}\n    </div>\n  );\n}\n\n// Step 3: Business Details - Consolidated business information\nfunction Step3BusinessDetails({\n  data,\n  updateData,\n}: {\n  data: Partial<OnboardingData>;\n  updateData: (updates: Partial<OnboardingData>) => void;\n}) {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-gray-50 border border-gray-200 rounded-xl p-4 mb-4\">\n        <p className=\"text-sm text-gray-700\">\n          <strong>≡ƒÆí Tip:</strong> Complete business details help customers find you and build trust. \n          The more information you provide, the better your visibility on our platform.\n        </p>\n      </div>\n\n      <div>\n        <Label htmlFor=\"business_name\" className=\"text-base font-semibold text-gray-900 mb-2 block\">\n          Business Name <span className=\"text-[#FF0077]\">*</span>\n        </Label>\n        <p className=\"text-xs text-gray-500 mb-2\">\n          This is how customers will see your business on the platform\n        </p>\n        <Input\n          id=\"business_name\"\n          value={data.business_name || \"\"}\n          onChange={(e) => updateData({ business_name: e.target.value })}\n          placeholder=\"Enter your business name\"\n          className=\"h-14 text-base border-gray-300 focus:border-[#FF0077] focus:ring-[#FF0077] rounded-xl\"\n          required\n        />\n      </div>\n\n      <div>\n        <Label htmlFor=\"description\" className=\"text-base font-semibold text-gray-900 mb-2 block\">\n          Business Description <span className=\"text-gray-500 font-normal text-sm\">(Recommended)</span>\n        </Label>\n        <p className=\"text-xs text-gray-500 mb-2\">\n          Describe your business, services, and what makes you special. This appears on your public profile.\n        </p>\n        <Textarea\n          id=\"description\"\n          value={data.description || \"\"}\n          onChange={(e) => updateData({ description: e.target.value })}\n          placeholder=\"Tell customers about your business, your expertise, and what makes you unique...\"\n          className=\"min-h-[120px] text-base border-gray-300 focus:border-[#FF0077] focus:ring-[#FF0077] rounded-xl resize-none\"\n          maxLength={2000}\n        />\n        <div className=\"flex items-center justify-between mt-2\">\n          <p className=\"text-xs text-gray-500\">\n            {(data.description?.length || 0)}/2000 characters\n          </p>\n          {data.description && data.description.length < 50 && (\n            <p className=\"text-xs text-amber-600 font-medium\">\n              Consider adding more details (at least 50 characters recommended)\n            </p>\n          )}\n        </div>\n      </div>\n\n      <div>\n        <Label htmlFor=\"website\" className=\"text-base font-semibold text-gray-900 mb-2 block\">\n          Website URL <span className=\"text-gray-500 font-normal text-sm\">(Optional)</span>\n        </Label>\n        <p className=\"text-xs text-gray-500 mb-2\">\n          Your website helps customers learn more about you and improves your search visibility\n        </p>\n        <Input\n          id=\"website\"\n          type=\"url\"\n          value={data.website || \"\"}\n          onChange={(e) => {\n            let value = e.target.value.trim();\n            if (value && !value.match(/^https?:\\/\\//)) {\n              value = `https://${value}`;\n            }\n            updateData({ website: value || undefined });\n          }}\n          placeholder=\"https://yourwebsite.com\"\n          className=\"h-14 text-base border-gray-300 focus:border-[#FF0077] focus:ring-[#FF0077] rounded-xl\"\n        />\n      </div>\n\n      <div>\n        <Label htmlFor=\"years_in_business\" className=\"text-base font-semibold text-gray-900 mb-2 block\">\n          Years in Business <span className=\"text-gray-500 font-normal text-sm\">(Optional)</span>\n        </Label>\n        <p className=\"text-xs text-gray-500 mb-2\">\n          Your experience helps build trust with customers\n        </p>\n        <select\n          id=\"years_in_business\"\n          value={data.years_in_business || \"\"}\n          onChange={(e) => updateData({ years_in_business: e.target.value ? parseInt(e.target.value) : undefined })}\n          className=\"w-full h-14 px-4 text-base border border-gray-300 rounded-xl focus:border-[#FF0077] focus:ring-[#FF0077] bg-white\"\n        >\n          <option value=\"\">Select years...</option>\n          <option value=\"0\">Just starting (0 years)</option>\n          <option value=\"1\">1 year</option>\n          <option value=\"2\">2 years</option>\n          <option value=\"3\">3 years</option>\n          <option value=\"4\">4 years</option>\n          <option value=\"5\">5 years</option>\n          <option value=\"6\">6-10 years</option>\n          <option value=\"11\">11-15 years</option>\n          <option value=\"16\">16-20 years</option>\n          <option value=\"21\">20+ years</option>\n        </select>\n      </div>\n\n      {/* Languages Spoken */}\n      <div>\n        <Label htmlFor=\"languages_spoken\" className=\"text-base font-semibold text-gray-900 mb-2 block\">\n          Languages You Speak\n          <span className=\"text-gray-500 font-normal text-sm ml-2\">(Optional but recommended)</span>\n        </Label>\n        <p className=\"text-xs text-gray-600 mb-3\">\n          Select the human languages you can communicate in with clients. This helps customers find providers who speak their language.\n        </p>\n        <div className=\"flex flex-wrap gap-2\">\n          {[\"English\", \"Afrikaans\", \"Zulu\", \"Xhosa\", \"Sesotho\", \"Tswana\", \"Venda\", \"Tsonga\", \"Swati\", \"Ndebele\", \"Southern Sotho\", \"Northern Sotho\"].map((lang) => {\n            const isSelected = (data.languages_spoken || [\"English\"]).includes(lang);\n            return (\n              <button\n                key={lang}\n                type=\"button\"\n                onClick={() => {\n                  const current = data.languages_spoken || [\"English\"];\n                  if (isSelected) {\n                    if (current.length > 1) {\n                      updateData({ languages_spoken: current.filter((l) => l !== lang) });\n                    }\n                  } else {\n                    updateData({ languages_spoken: [...current, lang] });\n                  }\n                }}\n                className={`px-4 py-2 rounded-full text-sm font-medium transition-colors ${\n                  isSelected\n                    ? \"bg-[#FF0077] text-white border-2 border-[#FF0077]\"\n                    : \"bg-white text-gray-700 border-2 border-gray-300 hover:border-[#FF0077] hover:text-[#FF0077]\"\n                } ${isSelected && (data.languages_spoken || [\"English\"]).length === 1 ? \"cursor-not-allowed opacity-75\" : \"cursor-pointer\"}`}\n                disabled={isSelected && (data.languages_spoken || [\"English\"]).length === 1}\n                title={isSelected && (data.languages_spoken || [\"English\"]).length === 1 ? \"At least one language is required\" : \"\"}\n              >\n                {lang}\n                {isSelected && (data.languages_spoken || [\"English\"]).length > 1 && (\n                  <span className=\"ml-1\">├ù</span>\n                )}\n              </button>\n            );\n          })}\n        </div>\n        <p className=\"text-xs text-gray-500 mt-2\">\n          Selected: {(data.languages_spoken || [\"English\"]).join(\", \")}\n        </p>\n      </div>\n\n      {/* Social Media Links */}\n      <div>\n        <Label className=\"text-base font-semibold text-gray-900 mb-2 block\">\n          Social Media Links\n          <span className=\"text-gray-500 font-normal text-sm ml-2\">(Optional but recommended)</span>\n        </Label>\n        <p className=\"text-xs text-gray-600 mb-3\">\n          Add your social media profiles to help customers find and connect with you online.\n        </p>\n        <div className=\"space-y-3\">\n          <div>\n            <Label htmlFor=\"facebook\" className=\"text-sm font-medium text-gray-700 mb-1 block\">\n              Facebook\n            </Label>\n            <Input\n              id=\"facebook\"\n              type=\"url\"\n              value={data.social_media_links?.facebook || \"\"}\n              onChange={(e) => {\n                const current = data.social_media_links || {};\n                updateData({\n                  social_media_links: {\n                    ...current,\n                    facebook: e.target.value.trim() || undefined,\n                  },\n                });\n              }}\n              placeholder=\"https://facebook.com/yourpage\"\n              className=\"h-12 text-base border-gray-300 focus:border-[#FF0077] focus:ring-[#FF0077] rounded-xl\"\n            />\n          </div>\n          <div>\n            <Label htmlFor=\"instagram\" className=\"text-sm font-medium text-gray-700 mb-1 block\">\n              Instagram\n            </Label>\n            <Input\n              id=\"instagram\"\n              type=\"url\"\n              value={data.social_media_links?.instagram || \"\"}\n              onChange={(e) => {\n                const current = data.social_media_links || {};\n                updateData({\n                  social_media_links: {\n                    ...current,\n                    instagram: e.target.value.trim() || undefined,\n                  },\n                });\n              }}\n              placeholder=\"https://instagram.com/yourprofile\"\n              className=\"h-12 text-base border-gray-300 focus:border-[#FF0077] focus:ring-[#FF0077] rounded-xl\"\n            />\n          </div>\n          <div>\n            <Label htmlFor=\"twitter\" className=\"text-sm font-medium text-gray-700 mb-1 block\">\n              Twitter / X\n            </Label>\n            <Input\n              id=\"twitter\"\n              type=\"url\"\n              value={data.social_media_links?.twitter || \"\"}\n              onChange={(e) => {\n                const current = data.social_media_links || {};\n                updateData({\n                  social_media_links: {\n                    ...current,\n                    twitter: e.target.value.trim() || undefined,\n                  },\n                });\n              }}\n              placeholder=\"https://twitter.com/yourhandle\"\n              className=\"h-12 text-base border-gray-300 focus:border-[#FF0077] focus:ring-[#FF0077] rounded-xl\"\n            />\n          </div>\n          <div>\n            <Label htmlFor=\"linkedin\" className=\"text-sm font-medium text-gray-700 mb-1 block\">\n              LinkedIn\n            </Label>\n            <Input\n              id=\"linkedin\"\n              type=\"url\"\n              value={data.social_media_links?.linkedin || \"\"}\n              onChange={(e) => {\n                const current = data.social_media_links || {};\n                updateData({\n                  social_media_links: {\n                    ...current,\n                    linkedin: e.target.value.trim() || undefined,\n                  },\n                });\n              }}\n              placeholder=\"https://linkedin.com/in/yourprofile\"\n              className=\"h-12 text-base border-gray-300 focus:border-[#FF0077] focus:ring-[#FF0077] rounded-xl\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Step 4: Payment Setup - Yoco Machine\nfunction Step4PaymentSetup({\n  data,\n  updateData,\n}: {\n  data: Partial<OnboardingData>;\n  updateData: (updates: Partial<OnboardingData>) => void;\n}) {\n  const options = [\n    { id: \"yes\", title: \"Yes, I do\", description: \"I have a Yoco card machine\" },\n    { id: \"no\", title: \"No (but I want one)\", description: \"I'd like to get a Yoco machine\" },\n    { id: \"other\", title: \"Other\", description: \"I have another card machine\" },\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"text-center mb-6\">\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n          Payment Setup\n        </h3>\n        <p className=\"text-base text-gray-600 mb-2\">\n          Do you have a Yoco Machine?\n        </p>\n        <p className=\"text-sm text-gray-500\">\n          Yoco is a popular card payment solution in South Africa. We'll help you set it up after onboarding.\n        </p>\n      </div>\n\n      <div className=\"space-y-4\">\n        {options.map((option) => {\n          const isSelected = data.yoco_machine === option.id;\n          return (\n            <button\n              key={option.id}\n              type=\"button\"\n              onClick={() => updateData({ yoco_machine: option.id as any })}\n              className={`w-full p-5 rounded-xl border-2 transition-all duration-200 text-left ${\n                isSelected\n                  ? \"border-[#FF0077] bg-[#FF0077]/5 shadow-md\"\n                  : \"border-gray-200 hover:border-gray-300 bg-white\"\n              }`}\n            >\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-1\">\n                    {option.title}\n                  </h3>\n                  <p className=\"text-sm text-gray-600\">\n                    {option.description}\n                  </p>\n                </div>\n                <div className={`w-6 h-6 rounded-full border-2 flex items-center justify-center ${\n                  isSelected\n                    ? \"border-[#FF0077] bg-[#FF0077]\"\n                    : \"border-gray-300\"\n                }`}>\n                  {isSelected && <Check className=\"w-4 h-4 text-white\" />}\n                </div>\n              </div>\n            </button>\n          );\n        })}\n      </div>\n\n      {data.yoco_machine === \"other\" && (\n        <div className=\"mt-4\">\n          <Label htmlFor=\"yoco_machine_other\" className=\"text-base font-semibold text-gray-900 mb-2 block\">\n            What card machine do you have?\n          </Label>\n          <Input\n            id=\"yoco_machine_other\"\n            value={data.yoco_machine_other || \"\"}\n            onChange={(e) => updateData({ yoco_machine_other: e.target.value })}\n            placeholder=\"e.g., iZettle, Square, etc.\"\n            className=\"h-14 text-base border-gray-300 focus:border-[#FF0077] focus:ring-[#FF0077] rounded-xl\"\n          />\n        </div>\n      )}\n\n      {/* VAT Registration */}\n      <div className=\"mt-8 pt-6 border-t border-gray-200\">\n        <div className=\"mb-4\">\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n            VAT Registration\n          </h3>\n          <p className=\"text-sm text-gray-600 mb-4\">\n            Are you VAT registered with SARS? VAT registration is mandatory if your annual turnover is R1 million or more.\n            If you make less than R1 million per year, you don't need to be VAT registered.\n          </p>\n        </div>\n        \n        <div className=\"space-y-3\">\n          <button\n            type=\"button\"\n            onClick={() => {\n              updateData({ \n                is_vat_registered: true,\n                vat_number: data.vat_number || \"\"\n              });\n            }}\n            className={`w-full p-4 rounded-xl border-2 transition-all duration-200 text-left ${\n              data.is_vat_registered === true\n                ? \"border-[#FF0077] bg-[#FF0077]/5 shadow-md\"\n                : \"border-gray-200 hover:border-gray-300 bg-white\"\n            }`}\n          >\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h4 className=\"font-semibold text-gray-900 mb-1\">Yes, I am VAT registered</h4>\n                <p className=\"text-sm text-gray-600\">I have a SARS VAT number</p>\n              </div>\n              <div className={`w-5 h-5 rounded-full border-2 flex items-center justify-center ${\n                data.is_vat_registered === true\n                  ? \"border-[#FF0077] bg-[#FF0077]\"\n                  : \"border-gray-300\"\n              }`}>\n                {data.is_vat_registered === true && <Check className=\"w-3 h-3 text-white\" />}\n              </div>\n            </div>\n          </button>\n          \n          <button\n            type=\"button\"\n            onClick={() => {\n              updateData({ \n                is_vat_registered: false,\n                vat_number: undefined\n              });\n            }}\n            className={`w-full p-4 rounded-xl border-2 transition-all duration-200 text-left ${\n              data.is_vat_registered === false\n                ? \"border-[#FF0077] bg-[#FF0077]/5 shadow-md\"\n                : \"border-gray-200 hover:border-gray-300 bg-white\"\n            }`}\n          >\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h4 className=\"font-semibold text-gray-900 mb-1\">No, I'm not VAT registered</h4>\n                <p className=\"text-sm text-gray-600\">My annual turnover is less than R1 million</p>\n              </div>\n              <div className={`w-5 h-5 rounded-full border-2 flex items-center justify-center ${\n                data.is_vat_registered === false\n                  ? \"border-[#FF0077] bg-[#FF0077]\"\n                  : \"border-gray-300\"\n              }`}>\n                {data.is_vat_registered === false && <Check className=\"w-3 h-3 text-white\" />}\n              </div>\n            </div>\n          </button>\n        </div>\n\n        {data.is_vat_registered === true && (\n          <div className=\"mt-4\">\n            <Label htmlFor=\"vat_number\" className=\"text-base font-semibold text-gray-900 mb-2 block\">\n              VAT Number (SARS) <span className=\"text-[#FF0077]\">*</span>\n            </Label>\n            <Input\n              id=\"vat_number\"\n              type=\"text\"\n              placeholder=\"4123456789\"\n              value={data.vat_number || \"\"}\n              onChange={(e) => {\n                // Only allow digits\n                const value = e.target.value.replace(/\\D/g, '');\n                if (value.length <= 10) {\n                  updateData({ vat_number: value });\n                }\n              }}\n              maxLength={10}\n              required\n              className=\"h-14 text-base border-gray-300 focus:border-[#FF0077] focus:ring-[#FF0077] rounded-xl\"\n            />\n            <p className=\"text-xs text-gray-600 mt-2\">\n              Your 10-digit SARS VAT registration number (must start with 4)\n            </p>\n            {data.vat_number && data.vat_number.length === 10 && !data.vat_number.startsWith('4') && (\n              <p className=\"text-xs text-red-600 mt-1\">\n                South African VAT numbers must start with 4\n              </p>\n            )}\n          </div>\n        )}\n\n        {data.is_vat_registered === false && (\n          <div className=\"mt-4 bg-green-50 border border-green-200 rounded-xl p-4\">\n            <p className=\"text-sm text-green-800\">\n              <strong>Not VAT Registered:</strong> No tax will be collected from customers. This is suitable for small businesses making less than R1 million per year.\n            </p>\n          </div>\n        )}\n      </div>\n\n      {/* Payout Setup */}\n      <div className=\"mt-8 pt-6 border-t border-gray-200\">\n        <div className=\"bg-blue-50 border border-blue-200 rounded-xl p-4 mb-4\">\n          <p className=\"text-sm text-blue-800\">\n            <strong>Payout Setup:</strong> To receive payments from bookings, you'll need to add your bank account details. \n            You can complete this now or set it up later in Settings.\n          </p>\n        </div>\n        <div className=\"flex items-center justify-between p-4 bg-white border-2 border-gray-200 rounded-xl\">\n          <div>\n            <h3 className=\"text-base font-semibold text-gray-900 mb-1\">\n              Bank Account for Payouts\n            </h3>\n            <p className=\"text-sm text-gray-600\">\n              Add your bank details to receive payments\n            </p>\n          </div>\n          <Button\n            type=\"button\"\n            variant=\"outline\"\n            onClick={() => {\n              // Open payout setup in a new tab or modal\n              // For now, mark as \"will set up later\"\n              updateData({ payout_setup_complete: false });\n              toast.info(\"You can set up your payout account after onboarding in Settings ΓåÆ Payout Accounts\");\n            }}\n            className=\"border-[#FF0077] text-[#FF0077] hover:bg-[#FF0077]/5\"\n          >\n            Set Up Later\n          </Button>\n        </div>\n        <p className=\"text-xs text-gray-500 mt-2\">\n          You can complete payout setup after onboarding. Payments will be held until your bank account is verified.\n        </p>\n      </div>\n    </div>\n  );\n}\n\n// Step 5: Current Software\nfunction Step5CurrentSoftware({\n  data,\n  updateData,\n}: {\n  data: Partial<OnboardingData>;\n  updateData: (updates: Partial<OnboardingData>) => void;\n}) {\n  const [softwareOptions, setSoftwareOptions] = useState<Array<{ id: string; name: string; slug: string }>>([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    const loadOptions = async () => {\n      try {\n        const response = await fetcher.get<{ data: Array<{ id: string; name: string; slug: string }> }>(\"/api/public/previous-software-options\");\n        setSoftwareOptions(response.data || []);\n      } catch (error) {\n        console.error(\"Error loading software options:\", error);\n        setSoftwareOptions([]);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    loadOptions();\n  }, []);\n\n  const options = [\n    { id: \"none\", name: \"No, I'm new to salon software\" },\n    ...softwareOptions.map(opt => ({ id: opt.slug, name: opt.name })),\n    { id: \"other\", name: \"Other\" },\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"text-center mb-6\">\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n          Current Software\n        </h3>\n        <p className=\"text-base text-gray-600 mb-2\">\n          Are you moving from another system?\n        </p>\n        <p className=\"text-sm text-gray-500\">\n          This helps us provide better migration support and understand your needs\n        </p>\n      </div>\n\n      {isLoading ? (\n        <div className=\"flex justify-center py-8\">\n          <Loader2 className=\"w-8 h-8 animate-spin text-[#FF0077]\" />\n        </div>\n      ) : (\n        <div className=\"space-y-4\">\n          {options.map((option) => {\n            const isSelected = data.previous_software === option.id;\n            return (\n              <button\n                key={option.id}\n                type=\"button\"\n                onClick={() => {\n                  updateData({ previous_software: option.id, previous_software_other: undefined });\n                }}\n                className={`w-full p-5 rounded-xl border-2 transition-all duration-200 text-left ${\n                  isSelected\n                    ? \"border-[#FF0077] bg-[#FF0077]/5 shadow-md\"\n                    : \"border-gray-200 hover:border-gray-300 bg-white\"\n                }`}\n              >\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-lg font-semibold text-gray-900\">\n                    {option.name}\n                  </span>\n                  <div className={`w-6 h-6 rounded-full border-2 flex items-center justify-center ${\n                    isSelected\n                      ? \"border-[#FF0077] bg-[#FF0077]\"\n                      : \"border-gray-300\"\n                  }`}>\n                    {isSelected && <Check className=\"w-4 h-4 text-white\" />}\n                  </div>\n                </div>\n              </button>\n            );\n          })}\n        </div>\n      )}\n\n      {data.previous_software === \"other\" && (\n        <div className=\"mt-4\">\n          <Label htmlFor=\"previous_software_other\" className=\"text-base font-semibold text-gray-900 mb-2 block\">\n            What software were you using?\n          </Label>\n          <Input\n            id=\"previous_software_other\"\n            value={data.previous_software_other || \"\"}\n            onChange={(e) => updateData({ previous_software_other: e.target.value })}\n            placeholder=\"Enter software name\"\n            className=\"h-14 text-base border-gray-300 focus:border-[#FF0077] focus:ring-[#FF0077] rounded-xl\"\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n\n// Step 6: Payroll\nfunction Step6Payroll({\n  data,\n  updateData,\n}: {\n  data: Partial<OnboardingData>;\n  updateData: (updates: Partial<OnboardingData>) => void;\n}) {\n  const options = [\n    { id: \"commission\", title: \"Commission\", description: \"Staff earn a percentage of sales\" },\n    { id: \"hourly\", title: \"Hourly\", description: \"Staff are paid by the hour\" },\n    { id: \"both\", title: \"Both\", description: \"Mix of commission and hourly\" },\n    { id: \"other\", title: \"Other\", description: \"Different payment structure\" },\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"text-center mb-6\">\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n          Payroll Structure\n        </h3>\n        <p className=\"text-base text-gray-600 mb-2\">\n          How do you pay your staff/yourself?\n        </p>\n        <p className=\"text-sm text-gray-500\">\n          This information helps us understand your business model (for analytics only)\n        </p>\n      </div>\n\n      <div className=\"space-y-4\">\n        {options.map((option) => {\n          const isSelected = data.payroll_type === option.id;\n          return (\n            <button\n              key={option.id}\n              type=\"button\"\n              onClick={() => updateData({ payroll_type: option.id as any })}\n              className={`w-full p-5 rounded-xl border-2 transition-all duration-200 text-left ${\n                isSelected\n                  ? \"border-[#FF0077] bg-[#FF0077]/5 shadow-md\"\n                  : \"border-gray-200 hover:border-gray-300 bg-white\"\n              }`}\n            >\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-1\">\n                    {option.title}\n                  </h3>\n                  <p className=\"text-sm text-gray-600\">\n                    {option.description}\n                  </p>\n                </div>\n                <div className={`w-6 h-6 rounded-full border-2 flex items-center justify-center ${\n                  isSelected\n                    ? \"border-[#FF0077] bg-[#FF0077]\"\n                    : \"border-gray-300\"\n                }`}>\n                  {isSelected && <Check className=\"w-4 h-4 text-white\" />}\n                </div>\n              </div>\n            </button>\n          );\n        })}\n      </div>\n\n      {data.payroll_type === \"other\" && (\n        <div className=\"mt-4\">\n          <Label htmlFor=\"payroll_details\" className=\"text-base font-semibold text-gray-900 mb-2 block\">\n            Please describe your payroll structure\n          </Label>\n          <Textarea\n            id=\"payroll_details\"\n            value={data.payroll_details || \"\"}\n            onChange={(e) => updateData({ payroll_details: e.target.value })}\n            placeholder=\"Describe how you pay your staff...\"\n            className=\"min-h-[100px] text-base border-gray-300 focus:border-[#FF0077] focus:ring-[#FF0077] rounded-xl resize-none\"\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction Step7Location({\n  data,\n  updateData,\n}: {\n  data: Partial<OnboardingData>;\n  updateData: (updates: Partial<OnboardingData>) => void;\n}) {\n  const isFreelancer = data.business_type === \"mobile\";\n  const [countries, setCountries] = useState<Array<{ code: string; name: string }>>([]);\n  const [isLoadingCountries, setIsLoadingCountries] = useState(true);\n\n  useEffect(() => {\n    const loadCountries = async () => {\n      try {\n        const response = await fetcher.get<{ data: Array<{ code: string; name: string }> }>(\"/api/public/countries\");\n        const countriesData = response.data || [];\n        \n        // If API returns empty array, use fallback\n        if (countriesData.length === 0) {\n          console.warn(\"Countries API returned empty array, using fallback\");\n          setCountries([\n            { code: \"ZA\", name: \"South Africa\" },\n            { code: \"KE\", name: \"Kenya\" },\n            { code: \"GH\", name: \"Ghana\" },\n            { code: \"NG\", name: \"Nigeria\" },\n            { code: \"EG\", name: \"Egypt\" },\n            { code: \"US\", name: \"United States\" },\n            { code: \"GB\", name: \"United Kingdom\" },\n            { code: \"CA\", name: \"Canada\" },\n            { code: \"AU\", name: \"Australia\" },\n            { code: \"NZ\", name: \"New Zealand\" },\n          ]);\n        } else {\n          setCountries(countriesData);\n        }\n      } catch (error) {\n        console.error(\"Error loading countries:\", error);\n        // Fallback to common countries\n        setCountries([\n          { code: \"ZA\", name: \"South Africa\" },\n          { code: \"KE\", name: \"Kenya\" },\n          { code: \"GH\", name: \"Ghana\" },\n          { code: \"NG\", name: \"Nigeria\" },\n          { code: \"EG\", name: \"Egypt\" },\n          { code: \"US\", name: \"United States\" },\n          { code: \"GB\", name: \"United Kingdom\" },\n          { code: \"CA\", name: \"Canada\" },\n          { code: \"AU\", name: \"Australia\" },\n          { code: \"NZ\", name: \"New Zealand\" },\n        ]);\n      } finally {\n        setIsLoadingCountries(false);\n      }\n    };\n    loadCountries();\n  }, []);\n\n  const handleAddressSelect = (addressData: {\n    address_line1: string;\n    city: string;\n    state?: string;\n    postal_code?: string;\n    country: string;\n    latitude: number;\n    longitude: number;\n  }) => {\n    updateData({\n      address: {\n        line1: addressData.address_line1,\n        line2: data.address?.line2 || undefined,\n        city: addressData.city,\n        state: addressData.state || \"\",\n        postal_code: addressData.postal_code || \"\",\n        country: addressData.country,\n        latitude: addressData.latitude,\n        longitude: addressData.longitude,\n      },\n    });\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl p-5 mb-6\">\n        <div className=\"flex items-start gap-3\">\n          <div className=\"flex-shrink-0 w-8 h-8 bg-green-500 rounded-full flex items-center justify-center\">\n            <MapPin className=\"w-5 h-5 text-white\" />\n          </div>\n          <div>\n            <h4 className=\"font-semibold text-green-900 mb-2\">Business Location</h4>\n            <p className=\"text-sm text-green-800\">\n              {isFreelancer ? (\n                <>\n                  Enter your base location or service area center. This helps customers find you and we'll use it to calculate travel fees and distances for at-home services.\n                </>\n              ) : (\n                <>\n                  Enter your salon address. This helps customers find you on the map and enables location-based search. We'll also use it to calculate travel fees for at-home services.\n                </>\n              )}\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {/* Address Autocomplete - Main field */}\n      <div>\n        <Label htmlFor=\"address\" className=\"text-sm sm:text-base font-semibold text-gray-900 mb-2 block\">\n          Address <span className=\"text-[#FF0077]\">*</span>\n        </Label>\n        <AddressAutocomplete\n          value={data.address?.line1 || \"\"}\n          onChange={handleAddressSelect}\n          placeholder=\"Start typing your address (e.g., 12 Gary Street, Johannesburg)\"\n          country={(() => {\n            // Convert country name to code for Mapbox if available\n            const countryName = data.address?.country || \"South Africa\";\n            const countryObj = countries.find(c => c.name === countryName);\n            return countryObj?.code || countryName;\n          })()}\n          className=\"h-12 sm:h-14 text-base\"\n          required\n        />\n        <p className=\"text-xs sm:text-sm text-gray-500 mt-2\">\n          ≡ƒÆí Start typing your address and select from suggestions to automatically fill in city, state, and postal code.\n        </p>\n      </div>\n\n      {/* Apartment/Suite - Optional */}\n      <div>\n        <Label htmlFor=\"address_line2\" className=\"text-sm sm:text-base font-semibold text-gray-900 mb-2 block\">\n          Apartment, suite, etc. <span className=\"text-gray-500 font-normal\">(Optional)</span>\n        </Label>\n        <Input\n          id=\"address_line2\"\n          value={data.address?.line2 || \"\"}\n          onChange={(e) => updateData({\n            address: {\n              ...data.address,\n              line2: e.target.value || undefined,\n            } as any\n          })}\n          placeholder=\"Apt 4B, Suite 200, etc.\"\n          className=\"h-12 sm:h-14 text-base border-gray-300 focus:border-[#FF0077] focus:ring-[#FF0077] rounded-lg\"\n        />\n      </div>\n\n      {/* City - Auto-filled from address but can be edited */}\n      <div>\n        <Label htmlFor=\"city\" className=\"text-sm sm:text-base font-semibold text-gray-900 mb-2 block\">\n          City <span className=\"text-[#FF0077]\">*</span>\n        </Label>\n        <Input\n          id=\"city\"\n          value={data.address?.city || \"\"}\n          onChange={(e) => updateData({\n            address: {\n              ...data.address,\n              city: e.target.value,\n            } as any\n          })}\n          placeholder=\"City (e.g., Cape Town)\"\n          className=\"h-12 sm:h-14 text-base border-gray-300 focus:border-[#FF0077] focus:ring-[#FF0077] rounded-lg\"\n          required\n        />\n        {data.address?.city && (\n          <p className=\"text-xs text-green-600 mt-1\">Γ£ô Auto-filled from address</p>\n        )}\n      </div>\n\n      {/* State/Province and Postal Code - Auto-filled but can be edited */}\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 md:gap-5\">\n        <div>\n          <Label htmlFor=\"state\" className=\"text-sm sm:text-base font-semibold text-gray-900 mb-2 block\">\n            State/Province <span className=\"text-gray-500 font-normal text-xs\">(Optional)</span>\n          </Label>\n          <Input\n            id=\"state\"\n            value={data.address?.state || \"\"}\n            onChange={(e) => updateData({\n              address: {\n                ...data.address,\n                state: e.target.value,\n              } as any\n            })}\n            placeholder=\"State or Province\"\n            className=\"h-12 sm:h-14 text-base border-gray-300 focus:border-[#FF0077] focus:ring-[#FF0077] rounded-lg\"\n          />\n        </div>\n        <div>\n          <Label htmlFor=\"postal_code\" className=\"text-sm sm:text-base font-semibold text-gray-900 mb-2 block\">\n            Postal Code <span className=\"text-gray-500 font-normal text-xs\">(Optional)</span>\n          </Label>\n          <Input\n            id=\"postal_code\"\n            value={data.address?.postal_code || \"\"}\n            onChange={(e) => updateData({\n              address: {\n                ...data.address,\n                postal_code: e.target.value,\n              } as any\n            })}\n            placeholder=\"Postal Code\"\n            className=\"h-12 sm:h-14 text-base border-gray-300 focus:border-[#FF0077] focus:ring-[#FF0077] rounded-lg\"\n          />\n        </div>\n      </div>\n\n      {/* Country - Dropdown */}\n      <div>\n        <Label htmlFor=\"country\" className=\"text-sm sm:text-base font-semibold text-gray-900 mb-2 block\">\n          Country <span className=\"text-[#FF0077]\">*</span>\n        </Label>\n        {isLoadingCountries ? (\n          <div className=\"h-12 sm:h-14 border border-gray-300 rounded-lg flex items-center justify-center\">\n            <p className=\"text-sm text-gray-500\">Loading countries...</p>\n          </div>\n        ) : (\n          <select\n            id=\"country\"\n            value={data.address?.country || \"South Africa\"}\n            onChange={(e) => updateData({\n              address: {\n                ...data.address,\n                country: e.target.value,\n              } as any\n            })}\n            className=\"w-full h-12 sm:h-14 px-4 text-base border border-gray-300 rounded-lg focus:border-[#FF0077] focus:ring-[#FF0077] bg-white\"\n            required\n          >\n            {countries.map((country) => (\n              <option key={country.code} value={country.name}>\n                {country.name}\n              </option>\n            ))}\n          </select>\n        )}\n      </div>\n    </div>\n  );\n}\n\nfunction Step9ServiceZones({\n  data,\n  updateData,\n}: {\n  data: Partial<OnboardingData>;\n  updateData: (updates: Partial<OnboardingData>) => void;\n}) {\n  const [suggestedZones, setSuggestedZones] = useState<any[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [selectedZoneIds, setSelectedZoneIds] = useState<string[]>(data.selected_zone_ids || []);\n\n  useEffect(() => {\n    const loadZones = async () => {\n      if (!data.address?.latitude || !data.address?.longitude) {\n        setIsLoading(false);\n        return;\n      }\n\n      try {\n        setIsLoading(true);\n        // Call onboarding-specific suggest endpoint\n        const response = await fetcher.post<{ data: { suggested_zones: any[] } }>(\"/api/provider/onboarding/suggest-zones\", {\n          address: data.address?.line1 || \"\",\n          latitude: data.address?.latitude,\n          longitude: data.address?.longitude,\n          city: data.address?.city || \"\",\n          postal_code: data.address?.postal_code || \"\",\n          country: data.address?.country || \"\",\n        });\n        const zones = response.data?.suggested_zones || [];\n        setSuggestedZones(zones);\n        \n        // Auto-select all suggested zones\n        if (zones.length > 0) {\n          const autoSelected = zones.map((z: any) => z.id);\n          setSelectedZoneIds(autoSelected);\n          updateData({ selected_zone_ids: autoSelected });\n          toast.success(`Auto-selected ${autoSelected.length} zone${autoSelected.length !== 1 ? 's' : ''} matching your location`);\n        }\n      } catch (error) {\n        console.error(\"Error loading suggested zones:\", error);\n        // If suggest endpoint fails, we'll skip zone selection\n        // Zones can be configured after onboarding\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    loadZones();\n  }, [data.address?.latitude, data.address?.longitude]);\n\n  const toggleZone = (zoneId: string) => {\n    const newSelection = selectedZoneIds.includes(zoneId)\n      ? selectedZoneIds.filter(id => id !== zoneId)\n      : [...selectedZoneIds, zoneId];\n    setSelectedZoneIds(newSelection);\n    updateData({ selected_zone_ids: newSelection });\n  };\n\n  const selectAll = () => {\n    const allIds = suggestedZones.map(z => z.id);\n    setSelectedZoneIds(allIds);\n    updateData({ selected_zone_ids: allIds });\n    toast.success(`Selected all ${allIds.length} zones`);\n  };\n\n  const deselectAll = () => {\n    setSelectedZoneIds([]);\n    updateData({ selected_zone_ids: [] });\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center py-12\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-[#FF0077] mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Finding service zones matching your location...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!data.address?.latitude || !data.address?.longitude) {\n    return (\n      <Alert>\n        <AlertCircle className=\"w-4 h-4\" />\n        <AlertDescription>\n          Please complete the location step first. We need your address coordinates to find matching service zones.\n        </AlertDescription>\n      </Alert>\n    );\n  }\n\n  return (\n    <div className=\"space-y-4 sm:space-y-5 md:space-y-6\">\n      <Alert className=\"bg-blue-50 border-blue-200\">\n        <AlertCircle className=\"w-4 h-4 text-blue-600\" />\n        <AlertDescription className=\"text-blue-800\">\n          <strong>Service zones</strong> define where you can provide at-home services. We've automatically found zones matching your location. You can select or skip this step and configure zones later.\n        </AlertDescription>\n      </Alert>\n\n      {suggestedZones.length === 0 ? (\n        <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4\">\n          <p className=\"text-yellow-800 text-sm\">\n            No service zones found for your location. You can configure zones later in Settings &gt; Service Zones.\n          </p>\n        </div>\n      ) : (\n        <>\n          <div className=\"flex items-center justify-between\">\n            <p className=\"text-sm text-gray-600\">\n              Found <strong>{suggestedZones.length}</strong> zone{suggestedZones.length !== 1 ? 's' : ''} matching your location\n            </p>\n            <div className=\"flex gap-2\">\n              <Button variant=\"outline\" size=\"sm\" onClick={selectAll}>\n                Select All\n              </Button>\n              <Button variant=\"outline\" size=\"sm\" onClick={deselectAll}>\n                Deselect All\n              </Button>\n            </div>\n          </div>\n\n          <div className=\"space-y-3\">\n            {suggestedZones.map((zone) => (\n              <div\n                key={zone.id}\n                className={`border-2 rounded-lg p-4 cursor-pointer transition-all ${\n                  selectedZoneIds.includes(zone.id)\n                    ? \"border-[#FF0077] bg-[#FF0077]/5\"\n                    : \"border-gray-200 hover:border-gray-300\"\n                }`}\n                onClick={() => toggleZone(zone.id)}\n              >\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                      <input\n                        type=\"checkbox\"\n                        checked={selectedZoneIds.includes(zone.id)}\n                        onChange={() => toggleZone(zone.id)}\n                        className=\"w-4 h-4 text-[#FF0077] border-gray-300 rounded focus:ring-[#FF0077]\"\n                      />\n                      <h3 className=\"font-semibold text-lg\">{zone.name}</h3>\n                      <span className=\"text-xs px-2 py-1 bg-gray-100 rounded\">\n                        {zone.zone_type === \"postal_code\" ? \"Postal Code\" :\n                         zone.zone_type === \"city\" ? \"City\" :\n                         zone.zone_type === \"radius\" ? \"Radius\" : \"Polygon\"}\n                      </span>\n                    </div>\n                    <p className=\"text-sm text-blue-700 mb-1\">{zone.match_reason}</p>\n                    <p className=\"text-xs text-gray-600\">\n                      You can set custom travel fees for each zone after onboarding.\n                    </p>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n\n          {selectedZoneIds.length > 0 && (\n            <div className=\"mt-4 p-4 bg-[#FF0077]/5 rounded-lg border border-[#FF0077]/20\">\n              <p className=\"text-sm text-[#FF0077]\">\n                <span className=\"font-medium\">{selectedZoneIds.length}</span> zone{selectedZoneIds.length !== 1 ? 's' : ''} selected. \n                You'll be able to set travel fees and pricing for each zone after completing onboarding.\n              </p>\n            </div>\n          )}\n        </>\n      )}\n    </div>\n  );\n}\n\nfunction Step10GlobalCategories({\n  data,\n  updateData,\n}: {\n  data: Partial<OnboardingData>;\n  updateData: (updates: Partial<OnboardingData>) => void;\n}) {\n  const [globalCategories, setGlobalCategories] = useState<GlobalCategory[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Auto-select common categories for freelancers\n  useEffect(() => {\n    if (data.business_type === \"mobile\" && globalCategories.length > 0 && (!data.global_category_ids || data.global_category_ids.length === 0)) {\n      // Suggest common categories for mobile services\n      const commonCategories = globalCategories\n        .filter(cat => {\n          const slug = cat.slug?.toLowerCase() || cat.name?.toLowerCase() || \"\";\n          return slug.includes(\"hair\") || slug.includes(\"massage\") || slug.includes(\"nails\") || slug.includes(\"barber\");\n        })\n        .slice(0, 2)\n        .map(cat => cat.id);\n      \n      if (commonCategories.length > 0) {\n        updateData({ global_category_ids: commonCategories });\n        toast.info(`We've pre-selected ${commonCategories.length} common categories. You can change them!`, { duration: 3000 });\n      }\n    }\n  }, [globalCategories, data.business_type]);\n\n  useEffect(() => {\n    const loadCategories = async () => {\n      try {\n        setIsLoading(true);\n        setError(null);\n        const response = await fetcher.get<{\n          data: GlobalCategory[];\n          error: null;\n        }>(\"/api/public/categories/global?all=true\");\n        setGlobalCategories(response.data || []);\n      } catch (err) {\n        const errorMessage =\n          err instanceof FetchTimeoutError\n            ? \"Request timed out. Please try again.\"\n            : err instanceof FetchError\n            ? err.message\n            : \"Failed to load categories\";\n        setError(errorMessage);\n        console.error(\"Error loading global categories:\", err);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    loadCategories();\n  }, []);\n\n  const toggleCategory = (categoryId: string) => {\n    const categoryIds = data.global_category_ids || [];\n    if (categoryIds.includes(categoryId)) {\n      updateData({\n        global_category_ids: categoryIds.filter((id) => id !== categoryId),\n      });\n    } else {\n      updateData({ global_category_ids: [...categoryIds, categoryId] });\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center py-12\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-[#FF0077] mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Loading categories...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n        <p className=\"text-red-800 text-sm\">{error}</p>\n        <Button\n          onClick={() => window.location.reload()}\n          variant=\"outline\"\n          className=\"mt-4\"\n        >\n          Retry\n        </Button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-4 sm:space-y-5 md:space-y-6\">\n      <Alert className=\"bg-blue-50 border-blue-200\">\n        <Sparkles className=\"w-4 h-4 text-blue-600\" />\n        <AlertDescription className=\"text-blue-800\">\n          <strong>Smart Setup:</strong> These categories help customers find you. \n          {(!data.services || data.services.length === 0) && (\n            <span> If you skip adding services, we'll automatically generate basic services based on your selected categories!</span>\n          )}\n        </AlertDescription>\n      </Alert>\n      {globalCategories.length === 0 ? (\n        <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4\">\n          <p className=\"text-yellow-800 text-sm\">\n            No categories available. Please contact support.\n          </p>\n        </div>\n      ) : (\n        <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3 sm:gap-4\">\n          {globalCategories.map((category) => (\n            <button\n              key={category.id}\n              onClick={() => toggleCategory(category.id)}\n              className={`p-4 border rounded-lg text-left transition-colors ${\n                data.global_category_ids?.includes(category.id)\n                  ? \"border-[#FF0077] bg-[#FF0077]/5 text-[#FF0077]\"\n                  : \"border-gray-300 hover:border-gray-400\"\n              }`}\n            >\n              <div className=\"flex items-center gap-3 mb-2\">\n                {category.icon && (\n                  <span className=\"text-2xl\">{category.icon}</span>\n                )}\n                <span className=\"font-medium\">{category.name}</span>\n              </div>\n              {category.description && (\n                <p className=\"text-xs text-gray-600 mt-1 line-clamp-2\">\n                  {category.description}\n                </p>\n              )}\n            </button>\n          ))}\n        </div>\n      )}\n      {data.global_category_ids && data.global_category_ids.length > 0 && (\n        <div className=\"mt-4 p-4 bg-[#FF0077]/5 rounded-lg border border-[#FF0077]/20\">\n          <p className=\"text-sm text-[#FF0077]\">\n            <span className=\"font-medium\">\n              {data.global_category_ids.length}\n            </span>{\" \"}\n            categor{data.global_category_ids.length === 1 ? \"y\" : \"ies\"}{\" \"}\n            selected\n          </p>\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction Step11ServiceCatalog({\n  data,\n  updateData,\n}: {\n  data: Partial<OnboardingData>;\n  updateData: (updates: Partial<OnboardingData>) => void;\n}) {\n  const [services, setServices] = useState<Service[]>(data.services || []);\n  const [showAddForm, setShowAddForm] = useState(false);\n  const [editingIndex, setEditingIndex] = useState<number | null>(null);\n  const [formService, setFormService] = useState<Partial<Service>>({\n    title: \"\",\n    description: \"\",\n    duration_minutes: 60,\n    price: 0,\n    currency: \"ZAR\",\n    supports_at_home: false,\n    supports_at_salon: true,\n    addons: [],\n  });\n\n  useEffect(() => {\n    updateData({ services });\n  }, [services]);\n\n  const handleAddService = () => {\n    if (!formService.title || !formService.duration_minutes || formService.price === undefined) {\n      toast.error(\"Please fill in all required fields\");\n      return;\n    }\n\n    if (editingIndex !== null) {\n      const updated = [...services];\n      updated[editingIndex] = formService as Service;\n      setServices(updated);\n      setEditingIndex(null);\n    } else {\n      setServices([...services, formService as Service]);\n    }\n\n    setFormService({\n      title: \"\",\n      description: \"\",\n      duration_minutes: 60,\n      price: 0,\n      currency: \"ZAR\",\n      supports_at_home: false,\n      supports_at_salon: true,\n      addons: [],\n    });\n    setShowAddForm(false);\n    toast.success(editingIndex !== null ? \"Service updated\" : \"Service added\");\n  };\n\n  const handleEditService = (index: number) => {\n    setFormService(services[index]);\n    setEditingIndex(index);\n    setShowAddForm(true);\n  };\n\n  const handleDeleteService = (index: number) => {\n    setServices(services.filter((_, i) => i !== index));\n    toast.success(\"Service removed\");\n  };\n\n  return (\n    <div className=\"space-y-4 sm:space-y-5 md:space-y-6\">\n      <Alert>\n        <AlertCircle className=\"w-4 h-4\" />\n        <AlertDescription>\n          Add your actual services with prices and durations. Customers will see these when booking. You can add more later.\n        </AlertDescription>\n      </Alert>\n\n      {services.length > 0 && (\n        <div className=\"space-y-3 sm:space-y-4\">\n          {services.map((service, index) => (\n            <div\n              key={index}\n              className=\"p-4 border rounded-lg space-y-3\"\n            >\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  <h4 className=\"font-medium\">{service.title}</h4>\n                  {service.description && (\n                    <p className=\"text-sm text-gray-600 mt-1\">{service.description}</p>\n                  )}\n                  <div className=\"flex gap-4 mt-2 text-sm text-gray-600\">\n                    <span>{service.duration_minutes} mins</span>\n                    <span>{service.currency} {service.price}</span>\n                    <span>\n                      {service.supports_at_salon && \"At Salon\"}\n                      {service.supports_at_salon && service.supports_at_home && \" ΓÇó \"}\n                      {service.supports_at_home && \"At Home\"}\n                    </span>\n                  </div>\n                </div>\n                <div className=\"flex gap-2\">\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => handleEditService(index)}\n                  >\n                    Edit\n                  </Button>\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => handleDeleteService(index)}\n                  >\n                    <Trash2 className=\"w-4 h-4\" />\n                  </Button>\n                </div>\n              </div>\n              {/* Addons Section */}\n              {service.addons && service.addons.length > 0 && (\n                <div className=\"pl-4 border-l-2 border-[#FF0077]/20 space-y-2\">\n                  <p className=\"text-xs font-medium text-gray-500\">Add-ons:</p>\n                  {service.addons.map((addon, addonIndex) => (\n                    <div key={addonIndex} className=\"text-sm text-gray-600 flex items-center justify-between\">\n                      <span>{addon.name} {addon.duration_minutes ? `(+${addon.duration_minutes} mins)` : \"\"}</span>\n                      <span className=\"font-medium\">{addon.currency} {addon.price}</span>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          ))}\n        </div>\n      )}\n\n      {showAddForm ? (\n        <div className=\"p-4 border rounded-lg bg-gray-50\">\n          <h4 className=\"font-medium mb-4\">\n            {editingIndex !== null ? \"Edit Service\" : \"Add Service\"}\n          </h4>\n          <div className=\"space-y-4\">\n            <div>\n              <Label htmlFor=\"service_title\">Service Name *</Label>\n              <Input\n                id=\"service_title\"\n                value={formService.title || \"\"}\n                onChange={(e) => setFormService({ ...formService, title: e.target.value })}\n                placeholder=\"e.g., Haircut, Manicure, Massage\"\n                required\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"service_description\">\n                Description\n                <span className=\"text-gray-500 font-normal text-xs ml-2\">\n                  (Recommended: 20-300 characters)\n                </span>\n              </Label>\n              <Textarea\n                id=\"service_description\"\n                value={formService.description || \"\"}\n                onChange={(e) => {\n                  const value = e.target.value;\n                  if (value.length <= 500) {\n                    setFormService({ ...formService, description: value });\n                  }\n                }}\n                placeholder=\"Describe what's included in this service, what customers can expect, and any special features...\"\n                rows={3}\n                maxLength={500}\n              />\n              <div className=\"flex items-center justify-between mt-1\">\n                <p className=\"text-xs text-gray-500\">\n                  {formService.description && formService.description.length < 20 ? (\n                    <span className=\"text-amber-600\">\n                      Consider adding more details ({formService.description.length}/20 minimum recommended)\n                    </span>\n                  ) : (\n                    <span>\n                      {formService.description?.length || 0}/500 characters\n                      {formService.description && formService.description.length >= 20 && (\n                        <span className=\"text-green-600 ml-2\">Γ£ô Good length</span>\n                      )}\n                    </span>\n                  )}\n                </p>\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    const templates = [\n                      \"Professional [service name] using premium products. Includes consultation, [key step 1], [key step 2], and styling. Perfect for [target audience].\",\n                      \"Comprehensive [service name] tailored to your needs. Our expert team will [main action] using [technique/product]. Results last [duration].\",\n                      \"Full [service name] experience. We begin with [step 1], followed by [step 2], and finish with [step 3]. Includes complimentary [extra].\",\n                    ];\n                    const randomTemplate = templates[Math.floor(Math.random() * templates.length)];\n                    setFormService({ ...formService, description: randomTemplate });\n                  }}\n                  className=\"text-xs text-[#FF0077] hover:underline\"\n                >\n                  Use template\n                </button>\n              </div>\n            </div>\n            <div className=\"grid grid-cols-3 gap-4\">\n              <div>\n                <Label htmlFor=\"service_duration\">Duration (minutes) *</Label>\n                <Input\n                  id=\"service_duration\"\n                  type=\"number\"\n                  min=\"1\"\n                  value={formService.duration_minutes || 60}\n                  onChange={(e) =>\n                    setFormService({\n                      ...formService,\n                      duration_minutes: parseInt(e.target.value) || 60,\n                    })\n                  }\n                  required\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"service_price\">Price *</Label>\n                <Input\n                  id=\"service_price\"\n                  type=\"number\"\n                  min=\"0\"\n                  step=\"0.01\"\n                  value={formService.price || 0}\n                  onChange={(e) =>\n                    setFormService({\n                      ...formService,\n                      price: parseFloat(e.target.value) || 0,\n                    })\n                  }\n                  required\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"service_currency\">Currency</Label>\n                <select\n                  id=\"service_currency\"\n                  value={formService.currency || \"ZAR\"}\n                  onChange={(e) =>\n                    setFormService({ ...formService, currency: e.target.value })\n                  }\n                  className=\"w-full p-2 border rounded-md\"\n                >\n                  <option value=\"ZAR\">ZAR</option>\n                  <option value=\"USD\">USD</option>\n                  <option value=\"EUR\">EUR</option>\n                </select>\n              </div>\n            </div>\n            <div className=\"flex gap-4\">\n              <label className=\"flex items-center gap-2\">\n                <input\n                  type=\"checkbox\"\n                  checked={formService.supports_at_salon !== false}\n                  onChange={(e) =>\n                    setFormService({ ...formService, supports_at_salon: e.target.checked })\n                  }\n                />\n                <span className=\"text-sm\">Available at salon</span>\n              </label>\n              <label className=\"flex items-center gap-2\">\n                <input\n                  type=\"checkbox\"\n                  checked={formService.supports_at_home || false}\n                  onChange={(e) =>\n                    setFormService({ ...formService, supports_at_home: e.target.checked })\n                  }\n                />\n                <span className=\"text-sm\">Available at home</span>\n              </label>\n            </div>\n            \n            {/* Addons Section */}\n            <ServiceAddonsManager\n              addons={formService.addons || []}\n              currency={formService.currency || \"ZAR\"}\n              onAddonsChange={(addons) => setFormService({ ...formService, addons })}\n            />\n\n            <div className=\"flex gap-2\">\n              <Button\n                onClick={handleAddService}\n                className=\"bg-[#FF0077] hover:bg-[#D60565] text-white\"\n              >\n                {editingIndex !== null ? \"Update\" : \"Add\"} Service\n              </Button>\n              <Button\n                variant=\"outline\"\n                onClick={() => {\n                  setShowAddForm(false);\n                  setEditingIndex(null);\n                  setFormService({\n                    title: \"\",\n                    description: \"\",\n                    duration_minutes: 60,\n                    price: 0,\n                    currency: \"ZAR\",\n                    supports_at_home: false,\n                    supports_at_salon: true,\n                    addons: [],\n                  });\n                }}\n              >\n                Cancel\n              </Button>\n            </div>\n          </div>\n        </div>\n      ) : (\n        <Button\n          onClick={() => setShowAddForm(true)}\n          variant=\"outline\"\n          className=\"w-full\"\n        >\n          <Plus className=\"w-4 h-4 mr-2\" />\n          Add Service\n        </Button>\n      )}\n\n      {services.length === 0 && (\n        <div className=\"text-center py-8 text-gray-500\">\n          <p>No services added yet. You can add services later if you prefer.</p>\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction ServiceAddonsManager({\n  addons,\n  currency,\n  onAddonsChange,\n}: {\n  addons: ServiceAddon[];\n  currency: string;\n  onAddonsChange: (addons: ServiceAddon[]) => void;\n}) {\n  const [showAddForm, setShowAddForm] = useState(false);\n  const [editingIndex, setEditingIndex] = useState<number | null>(null);\n  const [formAddon, setFormAddon] = useState<Partial<ServiceAddon>>({\n    name: \"\",\n    description: \"\",\n    price: 0,\n    currency: currency,\n    duration_minutes: 0,\n  });\n\n  const handleAddAddon = () => {\n    if (!formAddon.name || formAddon.price === undefined) {\n      toast.error(\"Addon name and price are required\");\n      return;\n    }\n\n    if (editingIndex !== null) {\n      const updated = [...addons];\n      updated[editingIndex] = formAddon as ServiceAddon;\n      onAddonsChange(updated);\n      setEditingIndex(null);\n    } else {\n      onAddonsChange([...addons, formAddon as ServiceAddon]);\n    }\n\n    setFormAddon({\n      name: \"\",\n      description: \"\",\n      price: 0,\n      currency: currency,\n      duration_minutes: 0,\n    });\n    setShowAddForm(false);\n    toast.success(editingIndex !== null ? \"Addon updated\" : \"Addon added\");\n  };\n\n  const handleEditAddon = (index: number) => {\n    setFormAddon(addons[index]);\n    setEditingIndex(index);\n    setShowAddForm(true);\n  };\n\n  const handleDeleteAddon = (index: number) => {\n    onAddonsChange(addons.filter((_, i) => i !== index));\n    toast.success(\"Addon removed\");\n  };\n\n  return (\n    <div className=\"space-y-3 pt-4 border-t\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <Label className=\"text-sm font-medium\">Add-ons (Optional)</Label>\n          <p className=\"text-xs text-gray-500 mt-1\">\n            Add optional extras customers can purchase with this service (e.g., \"Hair Treatment\", \"Nail Art\")\n          </p>\n        </div>\n        {!showAddForm && (\n          <Button\n            type=\"button\"\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => setShowAddForm(true)}\n          >\n            <Plus className=\"w-4 h-4 mr-1\" />\n            Add Add-on\n          </Button>\n        )}\n      </div>\n\n      {addons.length > 0 && (\n        <div className=\"space-y-2\">\n          {addons.map((addon, index) => (\n            <div\n              key={index}\n              className=\"p-3 bg-gray-50 rounded-lg flex items-center justify-between\"\n            >\n              <div className=\"flex-1\">\n                <span className=\"text-sm font-medium\">{addon.name}</span>\n                {addon.description && (\n                  <p className=\"text-xs text-gray-600 mt-1\">{addon.description}</p>\n                )}\n                <div className=\"flex gap-3 mt-1 text-xs text-gray-500\">\n                  {addon.duration_minutes && addon.duration_minutes > 0 && (\n                    <span>+{addon.duration_minutes} mins</span>\n                  )}\n                  <span>{addon.currency} {addon.price}</span>\n                </div>\n              </div>\n              <div className=\"flex gap-1\">\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => handleEditAddon(index)}\n                >\n                  Edit\n                </Button>\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => handleDeleteAddon(index)}\n                >\n                  <Trash2 className=\"w-4 h-4\" />\n                </Button>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {showAddForm && (\n        <div className=\"p-4 bg-blue-50 border border-blue-200 rounded-lg space-y-3\">\n          <h5 className=\"font-medium text-sm\">\n            {editingIndex !== null ? \"Edit Add-on\" : \"Add Add-on\"}\n          </h5>\n          <div className=\"space-y-3\">\n            <div>\n              <Label htmlFor=\"addon_name\" className=\"text-xs\">Name *</Label>\n              <Input\n                id=\"addon_name\"\n                value={formAddon.name || \"\"}\n                onChange={(e) => setFormAddon({ ...formAddon, name: e.target.value })}\n                placeholder=\"e.g., Hair Treatment, Nail Art\"\n                className=\"text-sm\"\n                required\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"addon_description\" className=\"text-xs\">Description</Label>\n              <Textarea\n                id=\"addon_description\"\n                value={formAddon.description || \"\"}\n                onChange={(e) => setFormAddon({ ...formAddon, description: e.target.value })}\n                placeholder=\"Brief description of the add-on\"\n                rows={2}\n                className=\"text-sm\"\n              />\n            </div>\n            <div className=\"grid grid-cols-3 gap-3\">\n              <div>\n                <Label htmlFor=\"addon_price\" className=\"text-xs\">Price *</Label>\n                <Input\n                  id=\"addon_price\"\n                  type=\"number\"\n                  min=\"0\"\n                  step=\"0.01\"\n                  value={formAddon.price || 0}\n                  onChange={(e) =>\n                    setFormAddon({\n                      ...formAddon,\n                      price: parseFloat(e.target.value) || 0,\n                    })\n                  }\n                  className=\"text-sm\"\n                  required\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"addon_currency\" className=\"text-xs\">Currency</Label>\n                <select\n                  id=\"addon_currency\"\n                  value={formAddon.currency || currency}\n                  onChange={(e) =>\n                    setFormAddon({ ...formAddon, currency: e.target.value })\n                  }\n                  className=\"w-full p-2 border rounded-md text-sm\"\n                >\n                  <option value=\"ZAR\">ZAR</option>\n                  <option value=\"USD\">USD</option>\n                  <option value=\"EUR\">EUR</option>\n                </select>\n              </div>\n              <div>\n                <Label htmlFor=\"addon_duration\" className=\"text-xs\">Extra Time (mins)</Label>\n                <Input\n                  id=\"addon_duration\"\n                  type=\"number\"\n                  min=\"0\"\n                  value={formAddon.duration_minutes || 0}\n                  onChange={(e) =>\n                    setFormAddon({\n                      ...formAddon,\n                      duration_minutes: parseInt(e.target.value) || 0,\n                    })\n                  }\n                  className=\"text-sm\"\n                  placeholder=\"0\"\n                />\n              </div>\n            </div>\n            <div className=\"flex gap-2\">\n              <Button\n                type=\"button\"\n                onClick={handleAddAddon}\n                size=\"sm\"\n                className=\"bg-[#FF0077] hover:bg-[#D60565] text-white\"\n              >\n                {editingIndex !== null ? \"Update\" : \"Add\"} Add-on\n              </Button>\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => {\n                  setShowAddForm(false);\n                  setEditingIndex(null);\n                  setFormAddon({\n                    name: \"\",\n                    description: \"\",\n                    price: 0,\n                    currency: currency,\n                    duration_minutes: 0,\n                  });\n                }}\n              >\n                Cancel\n              </Button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction Step12Hours({\n  data,\n  updateData,\n}: {\n  data: Partial<OnboardingData>;\n  updateData: (updates: Partial<OnboardingData>) => void;\n}) {\n  const days = [\n    { key: \"monday\", label: \"Monday\" },\n    { key: \"tuesday\", label: \"Tuesday\" },\n    { key: \"wednesday\", label: \"Wednesday\" },\n    { key: \"thursday\", label: \"Thursday\" },\n    { key: \"friday\", label: \"Friday\" },\n    { key: \"saturday\", label: \"Saturday\" },\n    { key: \"sunday\", label: \"Sunday\" },\n  ];\n\n  const updateHours = (\n    day: string,\n    field: \"open\" | \"close\" | \"closed\",\n    value: string | boolean\n  ) => {\n    const hours = data.operating_hours || {};\n    updateData({\n      operating_hours: {\n        ...hours,\n        [day]: { ...hours[day as keyof typeof hours], [field]: value },\n      },\n    });\n  };\n\n  const isFreelancer = data.business_type === \"mobile\";\n  \n  // Smart defaults for freelancers (more flexible hours)\n  useEffect(() => {\n    if (isFreelancer && !data.operating_hours) {\n      updateData({\n        operating_hours: {\n          monday: { open: \"08:00\", close: \"20:00\", closed: false },\n          tuesday: { open: \"08:00\", close: \"20:00\", closed: false },\n          wednesday: { open: \"08:00\", close: \"20:00\", closed: false },\n          thursday: { open: \"08:00\", close: \"20:00\", closed: false },\n          friday: { open: \"08:00\", close: \"20:00\", closed: false },\n          saturday: { open: \"09:00\", close: \"18:00\", closed: false },\n          sunday: { open: \"10:00\", close: \"16:00\", closed: false },\n        },\n      });\n    }\n  }, [isFreelancer]);\n\n  return (\n    <div className=\"space-y-3 sm:space-y-4\">\n      <Alert className={isFreelancer ? \"bg-green-50 border-green-200\" : \"\"}>\n        <AlertCircle className={`w-4 h-4 ${isFreelancer ? \"text-green-600\" : \"\"}`} />\n        <AlertDescription className={isFreelancer ? \"text-green-800\" : \"\"}>\n          {isFreelancer ? (\n            <span>\n              <strong>Freelancer Hours:</strong> We've set flexible hours (8 AM - 8 PM weekdays) perfect for mobile services. \n              Adjust as needed - you can change these anytime!\n            </span>\n          ) : (\n            <span>\n              Set your operating hours. Customers will only be able to book during these times. \n              You can adjust hours later in Settings.\n            </span>\n          )}\n        </AlertDescription>\n      </Alert>\n      {days.map((day) => {\n        const dayHours = data.operating_hours?.[day.key as keyof typeof data.operating_hours];\n        return (\n          <div key={day.key} className=\"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-4 p-3 sm:p-4 border rounded-lg\">\n            <div className=\"w-full sm:w-24 font-medium text-sm sm:text-base\">{day.label}</div>\n            <label className=\"flex items-center gap-2\">\n              <input\n                type=\"checkbox\"\n                checked={!dayHours?.closed}\n                onChange={(e) => updateHours(day.key, \"closed\", !e.target.checked)}\n              />\n              <span className=\"text-sm\">Open</span>\n            </label>\n            {!dayHours?.closed && (\n              <div className=\"flex items-center gap-2 sm:gap-3 w-full sm:w-auto\">\n                <Input\n                  type=\"time\"\n                  value={dayHours?.open || \"09:00\"}\n                  onChange={(e) => updateHours(day.key, \"open\", e.target.value)}\n                  className=\"w-full sm:w-32 text-sm sm:text-base\"\n                />\n                <span className=\"text-sm sm:text-base\">to</span>\n                <Input\n                  type=\"time\"\n                  value={dayHours?.close || \"18:00\"}\n                  onChange={(e) => updateHours(day.key, \"close\", e.target.value)}\n                  className=\"w-full sm:w-32 text-sm sm:text-base\"\n                />\n              </div>\n            )}\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n\nfunction Step13Review({ data }: { data: Partial<OnboardingData> }) {\n  return (\n    <div className=\"space-y-4 sm:space-y-5 md:space-y-6\">\n      <div>\n        <h3 className=\"font-semibold mb-2 text-base sm:text-lg\">Business Information</h3>\n        <div className=\"bg-gray-50 p-3 sm:p-4 rounded-lg space-y-2 text-sm\">\n          <p>\n            <span className=\"font-medium\">Name:</span> {data.business_name}\n          </p>\n          <p>\n            <span className=\"font-medium\">Type:</span> {data.business_type}\n          </p>\n          <p>\n            <span className=\"font-medium\">Phone:</span> {data.phone}\n          </p>\n          <p>\n            <span className=\"font-medium\">Email:</span> {data.email}\n          </p>\n          {data.previous_software && (\n            <p>\n              <span className=\"font-medium\">Previous Software:</span>{\" \"}\n              {data.previous_software === \"other\" \n                ? data.previous_software_other || \"Other\"\n                : data.previous_software === \"none\"\n                ? \"None / First time using salon software\"\n                : data.previous_software.charAt(0).toUpperCase() + data.previous_software.slice(1).replace(/_/g, \" \")\n              }\n            </p>\n          )}\n        </div>\n      </div>\n      {data.description && (\n        <div>\n          <h3 className=\"font-semibold mb-2 text-base sm:text-lg\">Business Description</h3>\n          <div className=\"bg-gray-50 p-3 sm:p-4 rounded-lg\">\n            <p className=\"text-sm text-gray-700 whitespace-pre-wrap leading-relaxed\">\n              {data.description}\n            </p>\n            <p className=\"text-xs text-gray-500 mt-2\">\n              {data.description.length} characters\n              {data.description.length >= 50 && (\n                <span className=\"text-green-600 ml-2\">Γ£ô Good length</span>\n              )}\n            </p>\n          </div>\n        </div>\n      )}\n      <div>\n        <h3 className=\"font-semibold mb-2 text-base sm:text-lg\">Location</h3>\n        <div className=\"bg-gray-50 p-3 sm:p-4 rounded-lg text-sm\">\n          {data.address?.line1}, {data.address?.city}, {data.address?.state}{\" \"}\n          {data.address?.postal_code}\n          {data.address?.latitude && data.address?.longitude && (\n            <p className=\"text-xs text-gray-500 mt-1\">\n              Coordinates: {data.address.latitude.toFixed(6)}, {data.address.longitude.toFixed(6)}\n            </p>\n          )}\n        </div>\n      </div>\n      {(data.business_type === \"mobile\" || data.business_type === \"both\") && data.selected_zone_ids && data.selected_zone_ids.length > 0 && (\n        <div>\n          <h3 className=\"font-semibold mb-2 text-base sm:text-lg\">Service Zones</h3>\n          <div className=\"bg-blue-50 p-3 sm:p-4 rounded-lg border border-blue-200\">\n            <p className=\"text-sm text-blue-800\">\n              <span className=\"font-medium\">{data.selected_zone_ids.length}</span> zone{data.selected_zone_ids.length !== 1 ? \"s\" : \"\"} selected for at-home services\n            </p>\n            <p className=\"text-xs text-blue-600 mt-1\">\n              Γ£ô Travel fees will be set to platform defaults. You can customize pricing after onboarding.\n            </p>\n          </div>\n        </div>\n      )}\n      <div>\n        <h3 className=\"font-semibold mb-2 text-base sm:text-lg\">Service Categories</h3>\n        <div className=\"bg-gray-50 p-3 sm:p-4 rounded-lg\">\n          {data.global_category_ids && data.global_category_ids.length > 0 ? (\n            <p className=\"text-sm text-gray-600\">\n              {data.global_category_ids.length} categor\n              {data.global_category_ids.length === 1 ? \"y\" : \"ies\"} selected\n            </p>\n          ) : (\n            <p className=\"text-sm text-gray-500\">No categories selected</p>\n          )}\n        </div>\n      </div>\n      {data.services && data.services.length > 0 ? (\n        <div>\n          <h3 className=\"font-semibold mb-2 text-base sm:text-lg\">Services ({data.services.length})</h3>\n          <div className=\"bg-gray-50 p-3 sm:p-4 rounded-lg space-y-3 sm:space-y-4\">\n            {data.services.map((service, index) => (\n              <div key={index} className=\"border-b border-gray-200 last:border-0 pb-3 last:pb-0\">\n                <div className=\"text-sm\">\n                  <div className=\"mb-1\">\n                    <span className=\"font-medium\">{service.title}</span> - {service.duration_minutes} mins - {service.currency} {service.price}\n                  </div>\n                  {service.description && (\n                    <div className=\"mt-2 pl-2 border-l-2 border-[#FF0077]/20\">\n                      <p className=\"text-xs text-gray-600 italic\">\"{service.description}\"</p>\n                    </div>\n                  )}\n                  {service.addons && service.addons.length > 0 && (\n                    <div className=\"mt-2 pl-4 border-l-2 border-gray-300 space-y-1\">\n                      {service.addons.map((addon, addonIndex) => (\n                        <div key={addonIndex} className=\"text-xs text-gray-600\">\n                          + {addon.name} - {addon.currency} {addon.price}\n                          {addon.duration_minutes && addon.duration_minutes > 0 && ` (+${addon.duration_minutes} mins)`}\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      ) : (\n        <div>\n          <h3 className=\"font-semibold mb-2 text-base sm:text-lg\">Services</h3>\n          <div className=\"bg-yellow-50 p-3 sm:p-4 rounded-lg border border-yellow-200\">\n            <p className=\"text-sm text-yellow-800\">\n              <span className=\"font-medium\">Auto-generation enabled:</span> We'll create basic services based on your selected categories. You can add more services after onboarding.\n            </p>\n          </div>\n        </div>\n      )}\n      <div>\n        <h3 className=\"font-semibold mb-2 text-base sm:text-lg\">Operating Hours</h3>\n        <div className=\"bg-gray-50 p-3 sm:p-4 rounded-lg\">\n          {data.operating_hours && Object.keys(data.operating_hours).length > 0 ? (\n            <div className=\"space-y-1 text-sm\">\n              {Object.entries(data.operating_hours).map(([day, hours]: [string, any]) => (\n                <div key={day} className=\"flex justify-between\">\n                  <span className=\"capitalize font-medium\">{day}:</span>\n                  <span className=\"text-gray-600\">\n                    {hours.closed ? \"Closed\" : `${hours.open} - ${hours.close}`}\n                  </span>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <p className=\"text-sm text-gray-500\">Default hours will be set</p>\n          )}\n        </div>\n      </div>\n      <Alert className=\"bg-green-50 border-green-200\">\n        <Check className=\"w-4 h-4 text-green-600\" />\n        <AlertDescription className=\"text-green-800\">\n          <strong>Almost done!</strong> After submission, we'll automatically configure:\n          <ul className=\"list-disc list-inside mt-2 space-y-1 text-sm\">\n            {data.business_type === \"mobile\" && (\n              <li>Mark you as mobile-ready staff</li>\n            )}\n            {data.selected_zone_ids && data.selected_zone_ids.length > 0 && (\n              <li>Set up {data.selected_zone_ids.length} service zone{data.selected_zone_ids.length !== 1 ? \"s\" : \"\"} with default pricing</li>\n            )}\n            {(!data.services || data.services.length === 0) && data.global_category_ids && data.global_category_ids.length > 0 && (\n              <li>Generate basic services based on your categories</li>\n            )}\n            <li>Create your provider profile and location</li>\n          </ul>\n        </AlertDescription>\n      </Alert>\n    </div>\n  );\n}\n\n// Step 14: Plan Selection\nfunction Step14PlanSelection({\n  data,\n  updateData,\n}: {\n  data: Partial<OnboardingData>;\n  updateData: (updates: Partial<OnboardingData>) => void;\n}) {\n  const [pricingPlans, setPricingPlans] = useState<Array<{\n    id: string;\n    name: string;\n    price: string;\n    period: string | null;\n    description: string | null;\n    cta_text: string;\n    is_popular: boolean;\n    features: string[];\n  }>>([]);\n  const [isLoadingPlans, setIsLoadingPlans] = useState(true);\n\n  useEffect(() => {\n    async function loadPlans() {\n      try {\n        setIsLoadingPlans(true);\n        const plans = await getPricingPlans();\n        setPricingPlans(plans);\n        \n        // If plan was pre-selected from query params, ensure it's in the list\n        if (data.selected_plan_id && !plans.find(p => p.id === data.selected_plan_id)) {\n          // Plan might not be active anymore, clear selection\n          updateData({ selected_plan_id: undefined });\n        }\n      } catch (error) {\n        console.error(\"Error loading pricing plans:\", error);\n        toast.error(\"Failed to load pricing plans. Please try again.\");\n      } finally {\n        setIsLoadingPlans(false);\n      }\n    }\n    loadPlans();\n  }, []);\n\n  if (isLoadingPlans) {\n    return (\n      <div className=\"flex items-center justify-center py-12\">\n        <Loader2 className=\"w-8 h-8 animate-spin text-[#FF0077]\" />\n        <span className=\"ml-3 text-gray-600\">Loading plans...</span>\n      </div>\n    );\n  }\n\n  if (pricingPlans.length === 0) {\n    return (\n      <div className=\"text-center py-12\">\n        <Alert>\n          <AlertCircle className=\"w-4 h-4\" />\n          <AlertDescription>\n            No pricing plans available at the moment. Please contact support.\n          </AlertDescription>\n        </Alert>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"text-center mb-8\">\n        <h3 className=\"text-2xl font-bold text-gray-900 mb-2\">\n          Choose Your Plan\n        </h3>\n        <p className=\"text-base text-gray-600\">\n          Select a subscription plan to get started. All plans include a 14-day free trial.\n        </p>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n        {pricingPlans.map((plan) => {\n          const isSelected = data.selected_plan_id === plan.id;\n          return (\n            <div\n              key={plan.id}\n              onClick={() => updateData({ selected_plan_id: plan.id })}\n              className={`relative rounded-2xl border-2 p-6 cursor-pointer transition-all ${\n                isSelected\n                  ? \"border-[#FF0077] shadow-xl bg-[#FF0077]/5\"\n                  : plan.is_popular\n                  ? \"border-gray-300 shadow-lg hover:border-[#FF0077]/50\"\n                  : \"border-gray-200 hover:border-gray-300\"\n              }`}\n            >\n              {plan.is_popular && (\n                <div className=\"absolute -top-3 left-1/2 transform -translate-x-1/2\">\n                  <span className=\"bg-[#FF0077] text-white px-3 py-1 rounded-full text-xs font-semibold\">\n                    Most Popular\n                  </span>\n                </div>\n              )}\n              \n              <div className=\"text-center mb-6\">\n                <h4 className=\"text-xl font-bold text-gray-900 mb-2\">{plan.name}</h4>\n                <div className=\"flex items-baseline justify-center gap-1 mb-2\">\n                  <span className=\"text-3xl font-bold text-gray-900\">{plan.price}</span>\n                  {plan.period && (\n                    <span className=\"text-gray-600 text-sm\">{plan.period}</span>\n                  )}\n                </div>\n                {plan.description && (\n                  <p className=\"text-sm text-gray-600\">{plan.description}</p>\n                )}\n              </div>\n\n              <ul className=\"space-y-3 mb-6\">\n                {plan.features.map((feature, index) => (\n                  <li key={index} className=\"flex items-start gap-2\">\n                    <Check className=\"w-5 h-5 text-[#FF0077] flex-shrink-0 mt-0.5\" />\n                    <span className=\"text-sm text-gray-700\">{feature}</span>\n                  </li>\n                ))}\n              </ul>\n\n              <div className={`w-full h-10 rounded-full flex items-center justify-center ${\n                isSelected\n                  ? \"bg-[#FF0077] text-white\"\n                  : \"bg-gray-100 text-gray-600\"\n              }`}>\n                {isSelected ? (\n                  <div className=\"flex items-center gap-2\">\n                    <Check className=\"w-5 h-5\" />\n                    <span className=\"font-semibold\">Selected</span>\n                  </div>\n                ) : (\n                  <span className=\"font-semibold\">Select Plan</span>\n                )}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n\n      {data.selected_plan_id && (\n        <Alert className=\"bg-green-50 border-green-200 mt-6\">\n          <Check className=\"w-4 h-4 text-green-600\" />\n          <AlertDescription className=\"text-green-800\">\n            <strong>Plan selected!</strong> After you submit, you'll be assigned to this plan and can start your 14-day free trial.\n          </AlertDescription>\n        </Alert>\n      )}\n    </div>\n  );\n}\n","usedDeprecatedRules":[]}]
